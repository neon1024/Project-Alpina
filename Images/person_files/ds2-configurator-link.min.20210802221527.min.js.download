define("ds2-configurator-link",["jquery","postal","ds2-page-context","ds2-accessibility"],function(e,c,b,f){function d(a){this.$element=e(a);this.accessibility=new f(a);this.$link=this.$element.is("a")?this.$element:this.$element.find("a");if(!this.$element.data("has-foreign-context")){this.params=this.$element.data("link-params");a=this.$link.attr("href");!this.initialUrl&&a&&(this.initialUrl=new URL(a));if(a)this.url=new URL(a);else return console.log("ERROR - configurator-link: cannot find href.");
a=function(a){this.url.href=this.initialUrl.href+b.createHash(this.params||a[b.CONFIGURATOR_PARAMS],a[b.MODEL_CODE],a[b.MODEL_RANGE],a[b.PAINT],a[b.FABRIC],a[b.OPTIONS]);this.setUrl(this.url.href)}.bind(this);c.subscribe({channel:b.CHANNEL,topic:"init",callback:a.bind(this)});c.publish({channel:b.CHANNEL,topic:"get",data:a.bind(this)})}}d.prototype.setUrl=function(a){this.$link.attr("href",a)};return d});