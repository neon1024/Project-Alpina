!function(d,x){function y(a,b,e,c,k){var f=!1;return a.contents().detach().each(function(){var g=d(this);if("undefined"==typeof this)return!0;if(g.is("script, .dotdotdot-keep"))a.append(g);else{if(f)return!0;a.append(g);!k||g.is(c.after)||g.find(c.after).length||a[a.is("a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](k);v(e,c)&&(f=3==this.nodeType?D(g,b,e,c,k):y(g,b,e,c,k),f||(g.detach(),
f=!0));f||k&&k.detach()}}),b.addClass("is-truncated"),f}function D(a,b,e,c,k){var f=a[0];if(!f)return!1;var g=z(f),m=-1!==g.indexOf(" ")?" ":"\u3000";m="letter"==c.wrap?"":m;var l=g.split(m),h=-1,q=-1,r=0,n=l.length-1;for(c.fallbackToLetter&&0==r&&0==n&&(m="",l=g.split(m),n=l.length-1);n>=r&&(0!=r||0!=n);){var p=Math.floor((r+n)/2);if(p==q)break;q=p;w(f,l.slice(0,q+1).join(m)+c.ellipsis);e.children().each(function(){d(this).toggle().toggle()});v(e,c)?(n=q,c.fallbackToLetter&&0==r&&0==n&&(m="",l=l[0].split(m),
h=-1,q=-1,r=0,n=l.length-1)):(h=q,r=q)}-1==h||1==l.length&&0==l[0].length?(e=a.parent(),a.detach(),a=k&&k.closest(e).length?k.length:0,e.contents().length>a?f=t(e.contents().eq(-1-a),b):(f=t(e,b,!0),a||e.detach()),f&&(g=A(z(f),c),w(f,g),a&&k&&d(f).parent().append(k))):(g=A(l.slice(0,h+1).join(m),c),w(f,g));return!0}function v(a,b){return a.innerHeight()>b.maxHeight}function A(a,b){for(;-1<d.inArray(a.slice(-1),b.lastCharacter.remove);)a=a.slice(0,-1);return 0>d.inArray(a.slice(-1),b.lastCharacter.noEllipsis)&&
(a+=b.ellipsis),a}function B(a){return{width:a.innerWidth(),height:a.innerHeight()}}function w(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function z(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function C(a){do a=a.previousSibling;while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function t(a,b,e){var c=a&&a[0];if(c){if(!e){if(3===c.nodeType)return c;if(d.trim(a.text()))return t(a.contents().last(),b)}for(e=
C(c);!e;){if(a=a.parent(),a.is(b)||!a.length)return!1;e=C(a[0])}if(e)return t(d(e),b)}return!1}function E(a,b){return a?"string"==typeof a?(a=d(a,b),a.length?a:!1):a.jquery?a:!1:!1}if(!d.fn.dotdotdot){d.fn.dotdotdot=function(a){if(0==this.length)return d.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){d(this).dotdotdot(a)});var b=this;b.data("dotdotdot")&&b.trigger("destroy.dot");b.data("dotdotdot-style",b.attr("style")||"");b.css("word-wrap",
"break-word");"nowrap"===b.css("white-space")&&b.css("white-space","normal");b.bind_events=function(){return b.bind("update.dot",function(a,h){switch(b.removeClass("is-truncated"),a.preventDefault(),a.stopPropagation(),typeof c.height){case "number":c.maxHeight=c.height;break;case "function":c.maxHeight=c.height.call(b[0]);break;default:a=c;for(var l=b.innerHeight(),g=["paddingTop","paddingBottom"],f=0,p=g.length;p>f;f++){var u=parseInt(b.css(g[f]),10);isNaN(u)&&(u=0);l-=u}a.maxHeight=l}c.maxHeight+=
c.tolerance;"undefined"!=typeof h&&(("string"==typeof h||"nodeType"in h&&1===h.nodeType)&&(h=d("\x3cdiv /\x3e").append(h).contents()),h instanceof d&&(e=h));m=b.wrapInner('\x3cdiv class\x3d"dotdotdot" /\x3e').children();m.contents().detach().end().append(e.clone(!0)).find("br").replaceWith("  \x3cbr /\x3e  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});h=l=!1;k.afterElement&&(l=k.afterElement.clone(!0),l.show(),k.afterElement.detach());if(v(m,c))if("children"==c.wrap){h=
m;a=c;g=h.children();f=!1;h.empty();p=0;for(u=g.length;u>p;p++){var t=g.eq(p);if(h.append(t),l&&h.append(l),v(h,a)){t.remove();f=!0;break}l&&l.detach()}h=f}else h=y(m,b,m,c,l);return m.replaceWith(m.contents()),m=null,d.isFunction(c.callback)&&c.callback.call(b[0],h,e),k.isTruncated=h,h}).bind("isTruncated.dot",function(a,c){return a.preventDefault(),a.stopPropagation(),"function"==typeof c&&c.call(b[0],k.isTruncated),k.isTruncated}).bind("originalContent.dot",function(a,c){return a.preventDefault(),
a.stopPropagation(),"function"==typeof c&&c.call(b[0],e),e}).bind("destroy.dot",function(a){a.preventDefault();a.stopPropagation();b.unwatch().unbind_events().contents().detach().end().append(e).attr("style",b.data("dotdotdot-style")||"").data("dotdotdot",!1)}),b};b.unbind_events=function(){return b.unbind(".dot"),b};b.watch=function(){if(b.unwatch(),"window"==c.watch){var a=d(window),h=a.width(),e=a.height();a.bind("resize.dot"+k.dotId,function(){h==a.width()&&e==a.height()&&c.windowResizeFix||(h=
a.width(),e=a.height(),g&&clearInterval(g),g=setTimeout(function(){b.trigger("update.dot")},100))})}else f=B(b),g=setInterval(function(){if(b.is(":visible")){var a=B(b);(f.width!=a.width||f.height!=a.height)&&(b.trigger("update.dot"),f=a)}},500);return b};b.unwatch=function(){return d(window).unbind("resize.dot"+k.dotId),g&&clearInterval(g),b};var e=b.contents(),c=d.extend(!0,{},d.fn.dotdotdot.defaults,a),k={},f={},g=null,m=null;return c.lastCharacter.remove instanceof Array||(c.lastCharacter.remove=
d.fn.dotdotdot.defaultArrays.lastCharacter.remove),c.lastCharacter.noEllipsis instanceof Array||(c.lastCharacter.noEllipsis=d.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),k.afterElement=E(c.after,b),k.isTruncated=!1,k.dotId=F++,b.data("dotdotdot",!0).bind_events().trigger("update.dot"),c.watch&&b.watch(),b};d.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0};d.fn.dotdotdot.defaultArrays=
{lastCharacter:{remove:" \u3000,;.!?".split(""),noEllipsis:[]}};d.fn.dotdotdot.debug=function(){};var F=1,G=d.fn.html;d.fn.html=function(a){return a!=x&&!d.isFunction(a)&&this.data("dotdotdot")?this.trigger("update",[a]):G.apply(this,arguments)};var H=d.fn.text;d.fn.text=function(a){return a!=x&&!d.isFunction(a)&&this.data("dotdotdot")?(a=d("\x3cdiv /\x3e").text(a).html(),this.trigger("update",[a])):H.apply(this,arguments)}}}(jQuery);