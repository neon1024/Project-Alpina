define("ds2-accessibility",["jquery","ds2-text-direction","focus-visible","ds2-main"],function(k,h){function c(a){this.keyCodes={TAB:"Tab",ENTER:"Enter",ESC:"Escape",SPACE:" ",END:"End",HOME:"Home",ARROW_LEFT:h.isLTR?"ArrowLeft":"ArrowRight",ARROW_UP:"ArrowUp",ARROW_RIGHT:h.isLTR?"ArrowRight":"ArrowLeft",ARROW_DOWN:"ArrowDown"};this.classes={onlyScreenReader:"ds2-only-screen-reader"};this.notFocusableDataAttributeKey="data-not-focusable";this.disabledInfiniteLooping=[];this.disabledAutoplay=[];this.movedElements=
[];a&&(this.element=this._getElement(a),this.element.classList.add("ds2-accessibility"))}c.prototype.focusElement=function(a,b,d){a=this._getElement(a);b=void 0===b?!1:b;d=void 0===d?!1:d;a&&!a.hasAttribute(this.notFocusableDataAttributeKey)&&a!=document.activeElement&&(b&&this.makeElementActive(a),a.focus(),d&&this.makeElementInactive(a))};c.prototype.markAsNotFocusable=function(a){if(a=this._getElement(a))a.setAttribute(this.notFocusableDataAttributeKey,""),this.makeElementInactive(a)};c.prototype.makeElementActive=
function(a){(a=this._getElement(a))&&!a.hasAttribute(this.notFocusableDataAttributeKey)&&a.setAttribute("tabindex","0")};c.prototype.makeElementInactive=function(a){(a=this._getElement(a))&&a.setAttribute("tabindex","-1")};c.prototype.setLastActiveElement=function(){this.activeElement=document.activeElement};c.prototype.focusLastActiveElement=function(){this.activeElement&&this.focusElement(this.activeElement)};c.prototype.addFocusMemoryToTabs=function(a){var b=this,d=this._getElements(a);d.forEach(function(a){b.makeElementActive(a)});
d.forEach(function(a){b.addKeyListener("down",{element:a,keyCodes:[b.keyCodes.ENTER],fn:function(){d.forEach(function(a){b.makeElementInactive(a)});b.makeElementActive(a)}})});d.forEach(function(a){a.addEventListener("focus",function(){d.forEach(function(a){b.makeElementActive(a)})})})};c.prototype.activateKeyboardTrap=function(a){var b=a.includeContainer||!1,d=a.requiredAncestor,c=this._getElement(a.container);if(c){a=this.getKeyboardFocusableElements(c);var e=b&&this._isFocusable(c)?c:a[0],g=a[a.length-
1];e&&g&&(this.firstFocusableElementHandler=this.addKeyListener("down",{element:e,keyCodes:[this.keyCodes.TAB],shiftKey:!0,fn:function(){return document.activeElement!==e||d&&!c.closest(d)?{cancel:!1}:(this.focusElement(g),{propagate:!1,cancel:!0})}}),this.lastFocusableElementHandler=this.addKeyListener("down",{element:g,keyCodes:[this.keyCodes.TAB],fn:function(){return document.activeElement!==g||d&&!c.closest(d)?{cancel:!1}:(this.focusElement(e),{propagate:!1,cancel:!0})}}))}};c.prototype.removeKeyboardTrap=
function(a){var b=a.includeContainer||!1,d=this._getElement(a.container);d&&(a=this.getKeyboardFocusableElements(d),b=b&&this._isFocusable(d)?d:a[0],a=a[a.length-1],b&&a&&(b.removeEventListener("keydown",this.firstFocusableElementHandler),a.removeEventListener("keydown",this.lastFocusableElementHandler)))};c.prototype.focusFirstFocusableChild=function(a){(a=this.getKeyboardFocusableElements(a,1)[0])&&this.focusElement(a)};c.prototype.getKeyboardFocusableElements=function(a,b){var d=this._getElement(a);
a=[];if(!d)return a;d=d.querySelectorAll("*");for(var c=0;c<d.length;c++){var e=d[c];if(this._isFocusable(e)&&(a.push(e),b&&a.length>=b))break}return a};c.prototype.scrollIntoViewWhenFocused=function(a,b){var d=this,c=this._getElement(a);c.addEventListener("focus",function(){d.scrollIntoView(c,b)})};c.prototype.scrollIntoView=function(a,b){a=this._getElement(a);b=Object.assign({behavior:"smooth",block:"nearest",inline:"center"},b);a.scrollIntoView(b)};c.prototype.makeElementReadable=function(a){(a=
this._getElement(a))&&a.setAttribute("aria-hidden","false")};c.prototype.makeElementUnreadable=function(a){(a=this._getElement(a))&&a.setAttribute("aria-hidden","true")};c.prototype.normalizeElementForScreenReaders=function(a){(a=this._getElement(a))&&this._removeEmptyParagraphs(a)};c.prototype.normalizeModalDialogForScreenReaders=function(a){var b=this._getElement(a.container);b&&(this.normalizeElementForScreenReaders(b),this.setAriaRole(b,"dialog"),this.setAriaAttribute("modal",b,"true"),null!=
a.ariaLive&&this.setAriaAttribute("live",b,a.ariaLive),null!=a.ariaLabelledBy&&this.setAriaAttribute("labelledby",b,a.ariaLabelledBy),null!=a.ariaDescribedBy&&this.setAriaAttribute("describedby",b,a.ariaDescribedBy))};c.prototype.activateScreenReaderTrap=function(a){var b=this,d=this._getElement(a),c=[];a={container:d,unreadables:c};if(d){var e=[];this._getAncestors(d,!0).forEach(function(a){a=b._getSiblingElements(a);e.push.apply(e,a)});e.forEach(function(a){var d=a.getAttribute("aria-hidden");"true"!==
d&&(c.push({deactivatedElement:a,ariaHiddenValue:d}),b.makeElementUnreadable(a))});(d=d.closest("main"))&&this.setAriaRole(d,"presentation");return a}};c.prototype.deactivateScreenReaderTrap=function(a){a&&a.unreadables&&(a.unreadables.forEach(function(a){var b=a.deactivatedElement;(a=a.ariaHiddenValue)?b.setAttribute("aria-hidden",a):b.removeAttribute("aria-hidden")}),(a=a.container.closest("main"))&&this.setAriaRole(a,"main"))};c.prototype.addOnlyScreenReaderClass=function(a){(a=this._getElement(a))&&
a.classList.add(this.classes.onlyScreenReader)};c.prototype.removeOnlyScreenReaderClass=function(a){(a=this._getElement(a))&&a.classList.remove(this.classes.onlyScreenReader)};c.prototype.highlightElementWhenParentInFocus=function(a,b){a=this._getElement(a);var d=this._getElement(b);a&&d&&(a.onfocus=function(){d.classList.add("has-parent-in-focus")},a.onblur=function(){d.classList.remove("has-parent-in-focus")})};c.prototype.highlightElementWhenChildInFocus=function(a,b,d){a=this._getElement(a);var c=
this._getElement(b),e=!1;a&&c&&(a.onmousedown=function(){e=!0},a.addEventListener("touchstart",function(){e=!0},window.digitals2.main.supportsPassiveEventListeners()?{passive:!0}:!1),a.onfocus=function(){setTimeout(function(){e||c.classList.add("has-child-in-focus");e=!1},50)},a.onblur=function(){setTimeout(function(){c.classList.remove("has-child-in-focus")},50)},d&&c.classList.add(d))};c.prototype.changeElementOrder=function(a,b,d,c){a=this._getElement(a);d=this._getElement(d);c=void 0===c?!1:c;
if(a&&d&&(!1!==c||-1===this.movedElements.indexOf(a))){var e=this.addUniqueIdAttribute({element:d});e=document.querySelector("#"+e).parentNode;if("before"===b)e.insertBefore(a,d);else if("after"===b)e.insertBefore(a,d.nextSibling);else return;!1===c&&this.movedElements.push(a)}};c.prototype.htmlToElement=function(a){var b=document.createElement("template");a=a.trim();b.innerHTML=a;return b.content.firstChild};c.prototype.setAriaRole=function(a,b){this.setAriaAttribute("role",a,b)};c.prototype.setAriaLabel=
function(a,b){this.setAriaAttribute("label",a,b)};c.prototype.setAriaExpanded=function(a,b){this.setAriaAttribute("expanded",a,b)};c.prototype.setAriaSelected=function(a,b){this.setAriaAttribute("selected",a,b)};c.prototype.setAriaPressed=function(a,b){this.setAriaAttribute("pressed",a,b)};c.prototype.setAriaChecked=function(a,b){this.setAriaAttribute("checked",a,b)};c.prototype.setAriaLevel=function(a,b){this.setAriaAttribute("level",a,b||"2")};c.prototype.setAriaHeading=function(a,b){this.setAriaRole(a,
"heading");this.setAriaLevel(a,b)};c.prototype.setAriaStatus=function(a,b){if(a=this._getElement(a)){var c=a.getAttribute("role");switch((c?c:a.tagName).toLowerCase()){case "tab":this.setAriaSelected(a,b);break;case "button":this.setAriaPressed(a,b);break;case "checkbox":case "switch":this.setAriaChecked(a,b)}}};c.prototype.setAriaAttribute=function(a,b,c){b=this._getElement(b);var d="role"!==a?"aria-":"";b&&(void 0!==c&&""!==c?b.setAttribute(d+a,c):b.removeAttribute(d+a))};c.prototype.addUniqueIdAttribute=
function(a){var b=this._getElement(a.element);a=void 0===a.prefix?"id-":a.prefix;var c=this._generateUuid();a+=c;b&&b.setAttribute("id",a);return a};c.prototype.addAriaLabelledbyAttribute=function(a){var b=this._getElement(a.element);a=void 0===a.referencedIds?[]:a.referencedIds;b&&b.setAttribute("aria-labelledby",a.join(" "))};c.prototype.makeAllLinksInSliderUnfocusable=function(a){this.makeElementsInSliderUnfocusable(a,"a")};c.prototype.makeActiveLinksInSliderUnfocusable=function(a){this.makeElementsInSliderUnfocusable(a,
'a[tabindex\x3d"0"]')};c.prototype.makeLinksInCurrentSlideFocusable=function(a){this.makeElementsInCurrentSlideFocusable(a,"a")};c.prototype.makeElementsInSliderUnfocusable=function(a,b){if(a)for(a=this._getElement(a).querySelectorAll(b),b=0;b<a.length;b++)this.makeElementInactive(a[b])};c.prototype.makeElementsInCurrentSlideFocusable=function(a,b){if(a)for(a=this._getElement(a).querySelectorAll(".slick-current:not(.slick-cloned) "+b),b=0;b<a.length;b++)this.makeElementActive(a[b])};c.prototype.deactivateInfiniteLoopingInSlick=
function(a,b){a&&-1===this.disabledInfiniteLooping.indexOf(a)&&(void 0===b&&(b=!0),!0===a.slick("slickGetOption","infinite")&&a.slick("slickSetOption","infinite",!1,b),this.disabledInfiniteLooping.push(a))};c.prototype.deactivateAutoplayInSlick=function(a,b){a&&-1===this.disabledAutoplay.indexOf(a)&&(void 0===b&&(b=!1),!0===a.slick("slickGetOption","autoplay")&&(a.slick("slickPause"),a.slick("slickSetOption","autoplay",!1,b)),this.disabledAutoplay.push(a))};c.prototype.deactivateNavigationViaArrowKeysInSlick=
function(a,b){a&&!0===a.slick("slickGetOption","accessibility")&&a.slick("slickSetOption","accessibility",!1,b)};c.prototype.addKeyListener=function(a,b){a="key"+a;var c=this._getElement(b.element);if(c&&("keyup"===a||"keydown"===a))return b=this._keyHandler(b),c.addEventListener(a,b),b};c.prototype._keyHandler=function(a){var b=this;return function(c){var d=c.key;return a.keyCodes.map(function(e){if(d.toLowerCase()===e.toLowerCase()&&!!a.shiftKey===c.shiftKey){var f;a.fn&&(f=a.fn.call(b,c)||{});
f.propagate||c.stopPropagation();return a.cancel||f.cancel?(c.preventDefault(),!1):!0}})}};c.prototype._generateUuid=function(){var a=(new Date).getTime(),b=performance&&performance.now&&1E3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=16*Math.random();0<a?(d=(a+d)%16|0,a=Math.floor(a/16)):(d=(b+d)%16|0,b=Math.floor(b/16));return("x"===c?d:d&3|8).toString(16)})};c.prototype._isFocusable=function(a){var b=a.nodeName.toLowerCase(),c=a.getAttribute("tabindex"),
f=!isNaN(c),e=f&&0<=parseInt(c);c=f&&-1===parseInt(c);if(this._isVisible(a)&&!c)return"a"===b?!!a.href||e:/input|select|textarea|button|object/.test(b)?!a.disabled:e};c.prototype._isVisible=function(a){return 0===this._getAncestors(a).filter(function(a){return"hidden"===getComputedStyle(a).visibility||"none"===getComputedStyle(a).display}).length};c.prototype._getAncestors=function(a,b){for(var c=[];a&&(!b||"BODY"!==a.tagName);)c.unshift(a),a=a.parentElement;return c};c.prototype._getSiblingElements=
function(a){var b=this._getElement(a);a=[];return b?this._toArray(b.parentElement.children).filter(function(a){return 1===a.nodeType&&a!==b}):a};c.prototype._toArray=function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++)b.push(a[c]);return b};c.prototype._getElement=function(a){return void 0===a.jquery?a:a[0]};c.prototype._getElements=function(a){return a.jquery?a.toArray():Array.from(a)};c.prototype._normalizeString=function(a){return a?a.trim().toLowerCase():""};c.prototype._removeEmptyParagraphs=
function(a){a.querySelectorAll("p").forEach(function(a){0===a.children.length&&""===a.textContent.trim()&&a.remove()})};c.prototype.requiresConformanceToWcagLevelA=function(){return document.body.hasAttribute("data-wcag-a")};c.prototype.requiresConformanceToWcagLevelAA=function(){return document.body.hasAttribute("data-wcag-aa")};return c});