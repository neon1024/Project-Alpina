define("ds2-showroom-tracking",["jquery","ds2-tracking-base","ds2-tracking","ds2-touch-detection"],(function(e,t,n,o){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var o,a;o=[t,n(1),n(2),n(3),n(4)],void 0===(a=function(e,t,n,o,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){e.ds2TrackingShowroom(o.default.getOptions(t))},t=r(t),n=r(n),o=r(o),a=r(a),t.default.widget("digitals2.ds2TrackingShowroom",n.default,{_initialize(e){this._super(e)},_create(){const e=this,n=e._super();return(0,t.default)(e.element).on("ds2-showroom-highlight-change-image-event",(n,o)=>{let a,r=0;a="left"===o?(0,t.default)(".slick-list .slick-active",e.element).first():(0,t.default)(".slick-list .slick-active",e.element).last(),a&&(r=a.data("slickIndex")+1,a=a.find(".ds2-showroom-highlight__item"),e._trackEvents(n,a,r))}),(0,t.default)(e.element).on("ds2-showroom-open-layer-highlight-event",(n,o)=>{let a="";if((o=(0,t.default)(o)).parents(".ds2-showroom-highlight").length){a=o.parent().data("slickIndex")+1;let t=o.find(".ds2-showroom-highlight__item-text  .ds2-showroom-highlight__item-number").text();t?t+=" ":t="",t+=o.find(".ds2-showroom-highlight__item-text  .ds2-showroom-highlight__item-headline").text(),e._trackEvents(n,o,a,t,null,"Image",null,null,null)}}),(0,t.default)(e.element).on("ds2-showroom-open-layer-gallery-event",(n,o,a)=>{let r,i;a+=1,(o=(o=(0,t.default)(o)).find("div.slick-active [data-tracking-event]")).length>1&&(o=(0,t.default)(o[0])),o.find(".ds2-quote--quote-main-container").length>0&&(r=o.find(".ds2-quote--text").text().trim(),r=r.replace(/ +(?= )/g,""),i="Text item");let l="";o.find("img").length>0&&(l="open_image"),o.find("video").length>0&&(l="start_video"),e._trackEvents(n,o,a,i,null,null,"overlay view","Open image",r,l)}),(0,t.default)(e.element).on("ds2-showroom-line-switch-slide-event",(n,o,a)=>{let r;(o=(o=(0,t.default)(o)).find("div.slick-active")).length>1&&(o=(0,t.default)(o[0])),window&&(r=window.location.href),e._trackEvents(n,o,"","",null,"Other",null,"Open layer",r,"open_layer")}),(0,t.default)(e.element).on("ds2-showroom-image-click",(n,o)=>{o=(0,t.default)(o),e._trackEvents(n,o)}),(0,t.default)(e.element).on("ds2-showroom-start-video-event",(n,o,a,r)=>{let i;if((o=(0,t.default)(o)).parents(".ds2-showroom-mosaicgallery").length>0&&(r?(o=o.parent(),i=e._getElementPosition(o)):o=(0,t.default)(o.children()[0])),!i){let e=o.closest(".ds2-layer-fullsize").children();i=e.index(o.parent())+1,i||(e=o.closest(".slick-track").children(),i=e.index(o.closest(".slick-slide"))+1)}e._trackEvents(n,o,i,null,a,null,null,"Start video")}),(0,t.default)(e.element).on("ds2-showroom-close-layer-event",(n,o)=>{if((o=(0,t.default)(o)).closest(".ds2-showroom-mosaicgallery")){const a=(0,t.default)(o).prev().find(".slick-active").data("slick-index")+1;(o=(0,t.default)(o).prev().find("div.slick-active [data-tracking-event]")).length>1&&(o=(0,t.default)(o[0])),e._trackEvents(n,o,a,"Close overlay",null,"Other","","Close image",null,"close_image")}}),(0,t.default)(e.element).on("ds2-showroom-switch-line-layer-event",(n,o,a)=>{o=(0,t.default)(o),"details-layer"===a?(o=o.siblings(".ds2-showroom-line__item-overview-text-container").children(".ds2-link"),e._trackEvents(n,o,"")):o.closest(".ds2-showroom-line")&&e._trackEvents(n,o,"")}),(0,t.default)(".ds2-showroom-multicontent__nav-item",e.element).on("click",n=>{const o=(0,t.default)(n.target),a=o.text().trim();e._trackMultiContent(n,o,a)}),(0,t.default)(e.element).on("ds2-showroom-multicontent-change-image-event",(n,o)=>{let r,i,l=(0,t.default)(e.element);const s=a.default.any;if((0,t.default)(e.element).find(".ds2-showroom-multicontent__nav").length>0){const n=(0,t.default)(e.element).find(".ds2-showroom-multicontent__nav li"),o=(0,t.default)(e.element).find(".ds2-showroom-multicontent__nav li.is-active"),a=n.index(o),r=(0,t.default)(e.element).find(".ds2-showroom-multicontent__slider-wrapper");l=(0,t.default)(r[a])}"left"===o?(i=s?"Previous Teaser":"Arrow Left",r=(0,t.default)(".slick-list .slick-active .ds2-showroom-multicontent__item",l).first()):(i=s?"Next Teaser":"Arrow Right",r=(0,t.default)(".slick-list .slick-active .ds2-showroom-multicontent__item",l).last()),r&&(n.currentTarget=r,e._trackMultiContent(n,r,i))}),(0,t.default)(e.element).get(0).addEventListener("ds2-showroom-preconfiguration-tracking",n=>{const o=(0,t.default)(n.detail)[0];e._trackPreconfiguration(n,o)}),(0,t.default)(e.element).on("ds2-showroom-offer-change-slide",(n,o)=>{e._trackEvents(n,(0,t.default)(o))}),(0,t.default)(e.element).on("ds2-showroom-offer-download",(n,o)=>{e._trackOffers(n,(0,t.default)(o))}),(0,t.default)(e.element).on("ds2-showroom-offer-accordion",(n,o,a)=>{const r=(0,t.default)(o).data("header");a||(a=(0,t.default)(r).text()),e._trackEvents(n,(0,t.default)(o),!1,a)}),n},_trackPreconfiguration(e,t){const n=this;let o=n._getTrackOptionsData(t.target);const a=n._getTrackingEventData(t.target);if(o&&a){const r=a.eventInfo.eventName||t.eventName||"";t.eventInfoTarget&&(a.eventInfo.target=t.eventInfoTarget),o=n.bmwTrackOptionsBuilder.options().name(a.eventInfo.track||o.name||"").build();const i=n._populateClickEvent({currentTarget:t},o.name,a.eventInfo.target,r,a.eventInfo.cause,a.eventInfo.effect);i.eventInfo.eventAction=a.eventInfo.eventAction,i.eventInfo.element=a.eventInfo.element,i.category.mmdr=a.category.mmdr||n._getDataTrackingEventParentMMDRAttr(t.target),a.category&&(i.category.eventType=a.category.eventType),n._parseDataFromEvent(i,o,e,!0)}},_trackEvents(e,t,n,o,a,r,i,l,s,c){const f=this;let d=f._getTrackOptionsData(t);const u=f._getTrackingEventData(t);if(d&&u){o||(o=u.eventInfo.eventName),a&&(u.eventInfo.effect=a),r&&(u.eventInfo.element=r),(i||""===i)&&(u.eventInfo.cause=i),l&&(u.eventInfo.eventAction=l),s&&(u.eventInfo.target=s),c&&(u.eventInfo.track=c),"Start video"!==l||u.eventInfo.cause||(u.eventInfo.cause="Auto"),d=f.bmwTrackOptionsBuilder.options().name(u.eventInfo.track||d.name||"").build();const v=f._populateClickEvent({currentTarget:t},d.name,u.eventInfo.target,o,u.eventInfo.cause,u.eventInfo.effect);n&&(v.eventInfo.eventPoints="position-".concat(n)),v.eventInfo.eventAction=u.eventInfo.eventAction,v.eventInfo.element=u.eventInfo.element,f._parseDataFromEvent(v,d,e,!0)}},_trackMultiContent(e,t,n){const o=this;let a=o._getTrackOptionsData(t);const r=o._getTrackingEventData(t);if(a&&r){r.eventInfo.eventName=n,a=o.bmwTrackOptionsBuilder.options().name(r.eventInfo.track||a.name||"").build();const t=o._populateClickEvent(e,a.name,r.eventInfo.target,r.eventInfo.eventName,r.eventInfo.cause,r.eventInfo.effect);o._parseDataFromEvent(t,a,e,!0)}},_trackOffers(e,t){const n=this;let o=n._getTrackOptionsData(t);const a=n._getTrackingEventData(t);if(o&&a){"text link"==a.eventInfo.cause&&(a.eventInfo.cause=""),"Internal click"===a.eventInfo.eventAction&&(a.eventInfo.cause=""),o=n.bmwTrackOptionsBuilder.options().name(o.name||a.eventInfo.track||"").build();const t=n._populateClickEvent(e,o.name,a.eventInfo.target,a.eventInfo.eventName,a.eventInfo.cause,a.eventInfo.effect);t.eventInfo.element=a.eventInfo.element,n._parseDataFromEvent(t,o,e,!0)}},_getTrackingEventData(e){let n;try{n=JSON.parse((0,t.default)(e).attr("data-tracking-event"))}catch(e){n=null}return n},_getTrackingEventDataFromParent(e){const n=(0,t.default)(e).parents(".ds2-showroom-preconfiguration").find(".ds2-showroom-preconfiguration__item.is-active");return this._getTrackingEventData(n)},_getDataTrackingEventParentMMDRAttr(e){const t=this._getTrackingEventDataFromParent(e);return t.category.mmdr?t.category.mmdr:""},_getTrackOptionsData:e=>(0,t.default)(e).data("tracking-options")||null,_getElementPosition(e){const t=e.attr("class");return t&&t.indexOf("mosaicgallery-tile-")>-1&&t.indexOf("mosaicgallery-tile-")+19<t.length?t[t.indexOf("mosaicgallery-tile-")+19]-1:0}})}.apply(t,o))||(e.exports=a)},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=o}])}));