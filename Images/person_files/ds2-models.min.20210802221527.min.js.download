define("ds2-tracking-model-overview",["jquery","ds2-tracking-base","ds2-tracking"],function(b,f,g){b.widget("digitals2.ds2TrackingModelOverview",f,{_listenersInit:function(){var e=this;b(window).on("ds2-model-overview--filtered",function(b,a){var c=digitals2.tracking.TrackingConstants;b=e.eventBuilder.newEvent().eventAction("Filter").primaryCategoryIsInteraction().eventName(a.eventName).cause(a.cause).build();b.category.mmdr=a.category.mmdr;a=e.bmwTrackOptionsBuilder.options().name(c.FILTER).useTimer(!0).build();
e._callExpandEvent(b,a)});this._super()}});return function(b){b.ds2TrackingModelOverview(g.getOptions("ds2-models"))}});
define("ds2-models","jquery lodash ds2-tracking-checker lazyload ds2-resize-events ds2-main".split(" "),function(b,f,g,e){var h=function(a){this.options={modelsCardItems:".ds2-models-js--card-item",modelsOptions:".ds2-models-js--options",modelsSeries:".ds2-models-js--series",modelsSeriesHeader:".ds2-models-js--series-header",modelsWrapper:".ds2-models-js--container",modelsAnchors:".ds2-models-js--anchors li",modelsCounterId:"#ds2-models-js--counter",checkbox:".ds2-models--filter .ds2-checkbox",modelsRowClasses:"ds2-row-padding row",
modelsWrapperClass:"ds2-models--series-wrap",modelsWrapperId:"ds2-models-js--series-wrap",animationEndEvent:"animationend",selectedClass:"ds2-selected",fadeInClass:"ds2-fade-in",fadeOutClass:"ds2-fade-out",inAnimationKey:"cardFadeIn",outAnimationKey:"cardFadeOut",hiddenClass:"ds2-hidden",lastElementClass:"end",customEventToStartFadeInAnimations:"customEventToStartFadeInAnimations",baseMargin:15,outSize:0,counter:0};new e({container:a});this.element=b(a);this._create();var c=this.element;g.isDigitals2TrackingAvailable()&&
require(["ds2-tracking-model-overview"],function(a){a(c)})};Object.assign(h.prototype,{_create:function(){var a=this;a.checkboxes=b(a.options.checkbox,b(".show-for-medium-up",a.element));a.modelSeries=b(a.options.modelsSeries,a.element);a.modelSeriesHeaders=b(a.options.modelsSeriesHeader,a.modelSeries);a.modelsWrapper=b(a.options.modelsWrapper,a.element);a.modelsCardItems=b(a.options.modelsCardItems,a.element);a.activeModelsCount=a.modelsCardItems.length;a.modelsCounter=b(a.options.modelsCounterId,
a.element);a.modelsOptions=b(a.options.modelsOptions,a.element);a.anchorsList=b(a.options.modelsAnchors,a.modelsOptions);a.layerCheckboxes=b(a.options.checkbox,".ds2-tooltip-element--filter");a.modelsToAnimateOut=b();a.modelsToAnimateIn=a.modelsCardItems;a._setDeviceValues();a._handleModelOptions();a._addCategoryName();a.modelsToAnimateOut={};a.modelsToAnimateIn={};a.checkboxes.on("click",function(b){a._filter();a._trackFilter(this)});a.layerCheckboxes.on("click",function(b){a._syncCheckboxes(!0);
a._filter();a._trackFilter(this)});if(0<a.modelsOptions.length)b(window).on("scroll",f.debounce(function(){a._handleModelOptions()},200));b(window.digitals2.resizeEvents).on("ds2ResizeSmall ds2ResizeMedium ds2ResizeLarge ds2ResizeLargeNavi ds2ResizeMediumNavi ds2ResizeSmallNavi",function(){a._onResize()});b(window.digitals2.main).on(a.options.customEventToStartFadeInAnimations,{self:a},a._startBatchInAnimation);a.modelsCardItems.addClass(a.options.fadeInClass)},_filter:function(){var a=this;a.checkedBoxes=
a.checkboxes.filter(":checked");a.modelsCardItems.removeClass(a.options.selectedClass);0===a.checkedBoxes.length?a.modelsToAnimateIn=a.modelsCardItems:(a.checkedBoxes.each(function(c,d){a.modelsCardItems.filter("."+b(d).val()).addClass(a.options.selectedClass)}),a.modelsToAnimateIn=a.modelsCardItems.filter("."+a.options.selectedClass));a.modelsToAnimateOut=a.modelsCardItems.filter("."+a.options.fadeInClass);a.modelsCardItems.removeClass(a.options.fadeInClass).removeClass(a.options.fadeOutClass);a.options.outSize=
a.modelsToAnimateOut.length-1;a.modelsToAnimateOut.one(a.options.animationEndEvent,{self:a},a._animationEndEventHandler);a._updateSeriesNumber(b());a.modelsToAnimateOut.addClass(a.options.fadeOutClass);a._syncCheckboxes();a._updateCounter();a._addCategoryName()},_animationEndEventHandler:function(a){var c=a.originalEvent,d=a.data.self;a=b(a.currentTarget);c.animationName===d.options.outAnimationKey&&(a.addClass(d.options.hiddenClass),d.options.counter===d.options.outSize?(d.options.counter=0,d.options.outSize=
0,b(window.digitals2.main).trigger(d.options.customEventToStartFadeInAnimations)):d.options.counter++)},_startBatchInAnimation:function(a){a=a.data.self;var b=a.modelsToAnimateIn;b&&0<b.length&&b.removeClass(a.options.hiddenClass).addClass(a.options.fadeInClass);a._updateSeriesNumber(b)},_updateSeriesNumber:function(a){0<a.length?a.closest(this.options.modelsSeries).find(this.options.modelsSeriesHeader).removeClass(this.options.hiddenClass):this.modelSeriesHeaders.addClass(this.options.hiddenClass)},
_handleModelOptions:function(){if(this.isMobile){this.modelsOptions.addClass("ds2-visible");var a=this.modelsOptions.height(),c=this.element.offset().top,d=c+this.element.height(),e=b(window).scrollTop(),f=3*this.options.baseMargin;d-a-e<f?this.modelsOptions.css({position:"absolute",top:"auto",bottom:"0"}):c-e<f?this.modelsOptions.css({position:"fixed",top:f,bottom:"auto"}):this.modelsOptions.css({position:"absolute",top:"0",bottom:"auto"})}else this.modelsOptions.removeClass("ds2-visible").css({position:"",
top:"",bottom:""})},_setDeviceValues:function(){switch(window.digitals2.resizeEvents.mediaQueryWatcherCheck()){case "ds2ResizeSmall":this.isMobile=!0;this.isTablet=!1;break;case "ds2ResizeMedium":this.isTablet=!0;this.isMobile=!1;break;default:this.isTablet=this.isMobile=!1}switch(window.digitals2.resizeEvents.mediaQueryNaviWatcherCheck()){case "ds2ResizeSmallNavi":this.isTablet=!0;this.modelsCardItems.removeClass("medium-4").addClass("medium-6");break;case "ds2ResizeMediumNavi":this.isTablet=!0,
this.modelsCardItems.removeClass("medium-6").addClass("medium-4")}},_trackFilter:function(a){var c=b(a).attr("id");a=b(a).closest(".ds2-label--group").find('label[for\x3d"'+c+'"]');a.data("trackingEvent")&&(c=a.data("trackingEvent"),c.eventName=c.cause=b.trim(a.text()),b(window).trigger("ds2-model-overview--filtered",c,this))},_addCategoryName:function(){var a=this;a.anchorsList.removeClass("ds2-active");a.modelsToAnimateIn.each(function(){var c="."+b(this).closest(".ds2-models--series").data("category-class");
a.anchorsList.filter(c).addClass("ds2-active")})},_syncCheckboxes:function(a){a?this.layerCheckboxes.each(function(){var a=b(this),d=b(b(this).data("checkbox-sync"));a=a.prop("checked");d.prop("checked",a)}):this.checkboxes.each(function(){var a=b(this),d=b(b(this).data("checkbox-sync"));a=a.prop("checked");d.prop("checked",a)})},_updateCounter:function(){this.activeModelsCount=this.modelsToAnimateIn.length;this.modelsCounter.text(this.activeModelsCount)},_onResize:function(){this._setDeviceValues();
this._handleModelOptions()}});return h});