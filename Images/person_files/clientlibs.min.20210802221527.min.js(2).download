var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var l=0;return function(){return l<b.length?{done:!1,value:b[l++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var l="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return l?l.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var l,m=[];!(l=b.next()).done;)m.push(l.value);return m};
$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
define("fonts-debugger",[],function(){return function(){function b(){g();[].concat($jscomp.arrayFromIterable(document.body.querySelectorAll("*"))).forEach(function(a){var b=[].concat($jscomp.arrayFromIterable(a.classList)).find(function(a){return a.startsWith(e.debugFonts)});b&&a.classList.remove(b)})}function l(a){a=void 0===a?"":a;var e=[].concat($jscomp.arrayFromIterable(document.body.querySelectorAll(t.relevantElements)));q=a?e.filter(function(e){return e.closest(a)}):e}function m(){v.map(function(a){var b=
e.debugFonts+"-"+a.join("-");a='\n                    \x3cstyle class\x3d"'+e.debugStyle+'"\x3e\n                        .'+b+" {\n                            position: relative;\n                        }\n                        ."+b+":after {\n                            position: absolute;\n                            content: '"+(""+a)+"';\n                            color: red;\n                            text-align: end;\n                            font-size: 12px;\n                            font-weight: 700;\n                            text-transform: uppercase;\n                            border: 2px solid currentColor;\n                            text-shadow: 0 0 4px rgba(255, 255, 255, 1), 0 0 8px rgba(255, 255, 255, 1), 0 0 12px rgba(255, 255, 255, 1);\n                            top: 0;\n                            right: 0;\n                            bottom: 0;\n                            left: 0;\n                        }\n                    \x3c/style\x3e\n                ";
b=document.createElement("template");a=a.trim();b.innerHTML=a;return b.content.firstChild}).forEach(function(a){return document.head.appendChild(a)})}function g(){document.head.querySelectorAll(e.debugStyle).forEach(function(a){return a.remove()})}function k(a){return Object.values(w).some(function(e){return parseInt(a.fontSize)===e})}function c(b){b=void 0===b?{}:b;var c=void 0===b.errorKeys?[]:b.errorKeys,t=void 0===b.printElements?!1:b.printElements;x=0;q.forEach(function(b){var n=[],f=getComputedStyle(b);
if([].concat($jscomp.arrayFromIterable(b.childNodes)).some(function(a){return 3===a.nodeType&&0<a.textContent.trim().length})){if(0===c.length||c.includes("family"))d(f.fontFamily)||n.push("family");if(0===c.length||c.includes("weight")){var g=parseInt(f.fontWeight);y.includes(g)||n.push("weight")}if(0===c.length||c.includes("size"))k(f)||n.push("size");if(0===c.length||c.includes("height"))a(b)||h(b)||Object.values(w).some(function(a){return parseInt(f.fontSize)===a})&&z.forEach(function(a){var e=
$jscomp.makeIterator(a);a=e.next().value;e=e.next().value;var b=parseInt(f.fontSize),c=parseInt(f.lineHeight);b===a&&c!==e&&n.push("height")});(0===c.length||c.includes("spacing"))&&"normal"!==f.letterSpacing&&0!==parseInt(f.letterSpacing)&&n.push("spacing");(0===c.length||c.includes("margin"))&&[f.marginTop,f.marginRight,f.marginBottom,f.marginLeft].some(function(a){return a.startsWith("-")})&&n.push("margin");if((0===c.length||c.includes("button"))&&a(b)){g=parseInt(f.fontSize);var m=parseInt(f.lineHeight);
16===g&&20===m||n.push("button")}0<n.length&&(x+=n.length,g=e.debugFonts+"-"+n.join("-"),b.classList.add(g),t&&console.log(b))}})}function a(a){if(!a)return!1;var e=getComputedStyle(a);a=parseInt(e.fontWeight);var b=parseInt(e.fontSize),c=parseInt(e.height);e=parseInt(e.width);return 700===a&&40<=c&&48<=e&&16===b}function h(e){return f(e,!0).some(function(e){return a(e)})}function f(a,e){for(var b=[];a&&(!e||"BODY"!==a.tagName);)b.unshift(a),a=a.parentElement;return b}function d(a){if(u){if(!n.rtl.includes(a))return!1}else if(B.includes(r)){if(!n.fallback[r].includes(a))return!1}else if(!a.includes(n.default))return!1;
return!0}var e={debugFonts:"debug-fonts",debugStyle:"debug-style"},t={debugFonts:"[class*\x3d"+e.debugFonts+"]",icons:"[class*\x3dicon-]",arrowButtons:"[class*\x3dbtn-arrow]"};t.relevantElements="*:not("+t.icons+"):not("+t.arrowButtons+"):not(script):not(body)";var n={default:"bmwTypeNextWeb",rtl:["bmwTypeWeb, Arial, Helvetica, sans-serif"],fallback:{"ja-JP":['bmwTypeWeb, Arial, Helvetica, "Noto Sans CJK JP", "Noto Sans", sans-serif'],"ko-KR":['bmwTypeWeb, Arial, Helvetica, "Noto Sans CJK KR", "Noto Sans", sans-serif'],
"zh-CN":['bmwTypeWeb, Arial, Helvetica, "Noto Sans CJK SC", "Noto Sans", sans-serif'],"zh-TW":['bmwTypeWeb, Arial, "microsoft jhenghei", Helvetica, "Noto Sans CJK TC", "Noto Sans", sans-serif'],"zh-HK":['bmwTypeWeb, Arial, "microsoft jhenghei", Helvetica, "Noto Sans CJK TC", "Noto Sans", sans-serif'],"th-TH":["bmwTypeWeb, Arial, Helvetica, sans-serif"],"vi-VN":["bmwTypeWeb, Arial, Helvetica, sans-serif"]}},B=Object.keys(n.fallback),y=[300,400,700],w={fs10:10,fs12:12,fs14:14,fs16:16,fs20:20,fs24:24,
fs32:32,fs48:48,fs64:64},z=[[10,14],[12,16],[14,20],[16,24],[20,28],[24,32],[32,40],[48,64],[64,80]],p={},A=(p.family='Invalid font-family. Valid value: "bmwTypeNextWeb" or "bmwTypeWeb" for special markets, see BMWWEB-33375',p.weight="Invalid font-weight. Valid values: "+y.join(", "),p.size="Invalid font-size. Valid values (px): "+Object.values(w).join(", "),p.height="Invalid line-height. Valid [font-size, line-height] pairs (in px):"+z.join(", "),p.spacing="Invalid letter-spacing. Valid value: 0",
p.margin="Invalid margin. Negative values are invalid.",p.button="Invalid button style. Valid values:\n                    font-size 16px, line-height 20px",p),v=function(a){var e=function(a,b,c){if(0!==a.length||0!==b.length)return 0===b.length?c.push(a):(e(a.concat(b[0]),b.slice(1),c),e(a,b.slice(1),c)),c};return e([],a,[])}(Object.keys(A)),u="rtl"===document.dir,r,q=[],x=0;window.fontsDebugger={showIssues:function(a){var e=void 0===a?{}:a;a=void 0===e.errorKeys?[]:e.errorKeys;var h=void 0===e.ancestor?
"":e.ancestor;e=void 0===e.printElements?!1:e.printElements;r=document.documentElement.lang;m();l(h);b();c({errorKeys:a,printElements:e});console.log("Number of errors: "+x);console.log("Sample usage with parameters: \nfontsDebugger.showIssues({errorKeys: ['family', 'size'], printElements: true, ancestor: '.my-component'});");console.log("Error keys:");console.table(A)},hideIssues:b}}});
define("ds2-uxn-navigation-utils",["fonts-debugger"],function(b){new b;b=function(){this.rtl="rtl"==$("html").attr("dir")};var l=b.prototype;l.isMobileLayout=function(){return 992>window.innerWidth};l.isExtendedTabletLayout=function(){return 1200>window.innerWidth};l.isRtl=function(){return this.rtl};l.getAnimationObject=function(b){return JSON.parse('{"'+this.getMarginProperty()+'": "'+b+'"}')};l.getMarginProperty=function(){return this.rtl?"margin-right":"margin-left"};l.isEventKeyCode=function(b,
g){return(b.keyCode?b.keyCode:b.which)!=g||b.shiftKey?!1:!0};l.isEventKeyCodeShift=function(b,g){return(b.keyCode?b.keyCode:b.which)==g&&b.shiftKey?!0:!1};l.focus=function(b){b&&0<b.length&&b.focus()};return new b});
define("ds2-uxn-allmodels-flyout",["jquery","ds2-uxn-navigation-utils"],function(b,l){var m=function(b){this.$component=b;this.$linksContainer=this.$component.find(".ds2-links-container");this.init()},g=m.prototype;g.setActionsHandler=function(b){this.actionsHandler=b};g.getTitle=function(){return this.$component.find(".ds2-flyout-nav-bar-data-holder").data("title")};g.showQuickActions=function(b){b=this.$component.find(".ds2-flyout-quickactions");this.actionsHandler.updateQuickActions({quickActionHtml:b.html()},
!0)};g.attachSeriesEvent=function(){var k=this;for(i=0;i<this.series.length;i++)b(k.series[i]).on("click",function(c){"-1"==b(c.currentTarget).data("series")?k.$linksContainer.show():k.$linksContainer.hide()})};g.attachShiftTabReturnPoint=function(){var k=this,c=this.series.first().find("button");if(0<c.length)c.on("keydown",function(a){l.isEventKeyCodeShift(a,b.ui.keyCode.TAB)&&(a.stopPropagation(),a.preventDefault(),k.actionsHandler.closeFlyOut())})};g.afterFlyoutReopened=function(){var b=this.series.first().find("button");
l.focus(b)};g.init=function(){this.series=this.$component.find(".pad2 .model-nav li");this.attachSeriesEvent();this.attachShiftTabReturnPoint()};return m});
define("ds2-uxn-multilevel-flyout",["jquery","lazyload","ds2-uxn-navigation-utils"],function(b,l,m){var g=function(b){this.$component=b;this.$flyout=this.$component.find(".ds2-flyout-multilevel");this.$leftContainer=this.$flyout.find(".ds2-flyout-multilevel-left");this.title=this.$leftContainer.find(".ds2-flyout-nav-bar-data-holder").data("title");this.$firstLevelLinks=this.$leftContainer.find(".ds2-first-level-item");this.$rightContainer=this.$flyout.find(".ds2-flyout-multilevel-right");this.$secondLevelContainers=
this.$rightContainer.find(".ds2-second-level-container");this.isExtendedTabletView=this.$component.parents(".ds2-navigation").hasClass("ds2-navigation--extended-tablet-view");this.preselectedSecondLevelLink=this.preselectedFirstLevelLink=null;new l({container:this.$rightContainer[0]});this.init()},k=g.prototype;k.setIdentifier=function(b){this.identifier=b};k.setActionsHandler=function(b){this.actionsHandler=b};k.setPreselectedFirstLevelLink=function(b){this.preselectedFirstLevelLink=b};k.setPreselectedSecondLevelLink=
function(b){this.preselectedSecondLevelLink=b};k.getTitle=function(){return this.title};k.showQuickActions=function(b){b=b.find(".ds2-flyout-quickactions");this.actionsHandler.updateQuickActions({quickActionHtml:b.html()})};k.showCurrentQuickActions=function(){var b=this.$component.find(".ds2-second-level-container_active");this.showQuickActions(b)};k.canHandleBackAction=function(){return"none"!=this.$component.css("display")&&"1"==this.$rightContainer.css("opacity")};k.handleBackAction=function(){this.showLeftContainer(!0);
b(window).trigger("ds2-uxn-navigation-level-3-closed")};k.deactivateAllOtherFirstLevelLinks=function(c){for(i=0;i<this.$firstLevelLinks.length;i++){var a=b(this.$firstLevelLinks[i]);a.attr("data-localId")==c?a.addClass("ds2-first-level-item_active"):a.removeClass("ds2-first-level-item_active")}};k.deactivateAllOtherSecondLevelContainers=function(c,a){for(i=0;i<this.$secondLevelContainers.length;i++){var h=b(this.$secondLevelContainers[i]);h.attr("data-localId")==c?(h.addClass("ds2-second-level-container_active"),
this.showQuickActions(h),a||this.actionsHandler.setFlyoutTitle(h.find(".ds2-flyout-nav-bar-data-holder").html(),!0,!1)):h.removeClass("ds2-second-level-container_active")}};k.animateElement=function(b){b.animate({opacity:0},300);b.animate({opacity:1},80)};k.showLeftContainer=function(b){var a=this;b?this.actionsHandler.setFlyoutTitle(this.title,!1,!0):this.actionsHandler.setFlyoutTitle(this.title,!1,!1);b?(this.$leftContainer.show(),this.$flyout.css(m.getMarginProperty(),"-100%"),this.$flyout.animate(m.getAnimationObject("0"),
400,function(){a.$rightContainer.hide()}),this.$leftContainer.css("opacity",.2),this.$leftContainer.animate({opacity:"1"},400),this.$rightContainer.css("opacity",1),this.$rightContainer.animate({opacity:"0.2"},400)):(this.$flyout.css("margin-left","0"),this.$flyout.css("margin-right","0"),this.$leftContainer.css("opacity",1),this.$rightContainer.css("opacity",.2),this.$leftContainer.show(),this.$rightContainer.hide())};k.showRightContainer=function(){if(this.isMobileLayout()){var b=this;this.$rightContainer.show();
this.$flyout.animate(m.getAnimationObject("-100%"),400,function(){b.$leftContainer.hide();b.$flyout.css(m.getMarginProperty(),0)});this.$leftContainer.animate({opacity:"0.2"},400);this.$rightContainer.animate({opacity:"1"},400)}};k.resetCss=function(){this.$flyout.css("margin-left","0");this.$flyout.css("margin-right","0");this.$leftContainer.css("opacity","1");this.$rightContainer.css("opacity","1");this.$leftContainer.show();this.$rightContainer.show()};k.selectActiveItems=function(b,a){var h=b.attr("data-localId");
b="directLink"==b.attr("data-directLink");this.deactivateAllOtherFirstLevelLinks(h);this.deactivateAllOtherSecondLevelContainers(h,b);a&&a.addClass("ds2-second-level-item-highlight")};k.preselectActiveItems=function(){this.preselectedFirstLevelLink&&this.selectActiveItems(this.preselectedFirstLevelLink,this.preselectedSecondLevelLink)};k.afterFlyoutReopened=function(){m.focus(this.$firstLevelLinks.first())};k.attachEvents=function(){var c=this,a=function(a,h){var e="directLink"==a.attr("data-directLink");
c.selectActiveItems(a);e||c.showRightContainer();"mouseenter"===h.type?b(window).trigger("ds2-uxn-level2-hover",a):"click"===h.type&&(b(window).trigger("ds2-uxn-level2-click",a),e&&(h.preventDefault(),c.openDirectLink(a.find("a"))))},h=function(e){"mouseenter"==e.type&&c.isMobileLayout()||a(b(this),e)},f;for(f=0;f<this.$firstLevelLinks.length;f++){var d=b(this.$firstLevelLinks[f]);d.on("mouseenter",h);d.on("click",h);if(!d.attr("data-directLink"))d.on("keypress",function(e){"13"==(e.keyCode?e.keyCode:
e.which)&&(a(b(this),e),e=b(e.target).attr("data-localId"),e=c.$rightContainer.find('.ds2-second-level-container[data-localId\x3d"'+e+'"]').find(".ds2-second-level-item").first(),m.focus(e))})}for(f=0;f<this.$secondLevelContainers.length;f++)for(h=b(this.$secondLevelContainers[f]).find(".ds2-second-level-item"),j=0;j<h.length;j++)b(h[j]).on("click",function(a){var e=b(this);a.preventDefault();b(window).trigger("ds2-uxn-level3-click",e);c.animateElement(e);c.openDirectLink(e)})};k.openDirectLink=function(b){var a=
b.attr("href"),h=b.attr("target");a&&setTimeout(function(){"_blank"!==h?window.location=a:window.open(a,h)},150)};k.attachFocusOrderEvents=function(){var c=this;this.$firstLevelLinks.first().on("keydown",function(a){m.isEventKeyCodeShift(a,b.ui.keyCode.TAB)&&(a.stopPropagation(),a.preventDefault(),c.actionsHandler.closeFlyOut())});this.$firstLevelLinks.last().on("keydown",function(a){m.isEventKeyCode(a,b.ui.keyCode.TAB)&&(a.stopPropagation(),a.preventDefault(),c.actionsHandler.focusOnClose(c.$firstLevelLinks.last()))});
for(i=0;i<this.$secondLevelContainers.length;i++)b(this.$secondLevelContainers[i]).find(".ds2-second-level-item").first().on("keydown",function(a){m.isEventKeyCodeShift(a,b.ui.keyCode.TAB)&&(a.stopPropagation(),a.preventDefault(),a=b(a.target).closest(".ds2-second-level-container").attr("data-localId"),a=c.$leftContainer.find('.ds2-first-level-item[data-localId\x3d"'+a+'"]'),m.focus(a))})};k.isMobileLayout=function(){return m.isMobileLayout()||m.isExtendedTabletLayout()&&this.isExtendedTabletView};
k.init=function(){this.attachEvents();this.attachFocusOrderEvents()};return g});
define("ds2-uxn-search-flyout",["jquery","ds2-uxn-navigation-utils"],function(b,l){var m=function(b){this.$component=b;this.$input=b.find(".borderless");this.$submit=b.find(".ds2-search-submit");this.$autocomplete=b.find(".autocomplete");this.$suggestionList=b.find(".ds2_flyout-suggestion");this.suggestions=[];this.title=this.$component.find(".ds2-flyout-nav-bar-data-holder").data("title");this.init()},g=m.prototype;g.setSearchLabel=function(b){this.searchLabel=b};g.setSearchUrl=function(b){this.searchUrl=
b};g.setActionsHandler=function(b){this.actionsHandler=b};g.reset=function(){this.$input.val("");this.$submit.hide();this.writeAutocompleteValue(this.searchLabel);this.writeSuggestions("")};g.afterFlyoutReopened=function(){l.focus(this.$input)};g.handleSearchSubmit=function(){var b=this.$input.val();this.goToSearchPage(b)};g.goToSearchPage=function(b){var c=new URL(location.origin+this.searchUrl);b=encodeURIComponent(b);c.hash=btoa('{"q":"'+b+'"}');c.searchParams.set("q",b);window.location.href=c.toString();
0<=window.location.href.indexOf(this.searchUrl)&&location.reload()};g.handleRightArrowPress=function(){var b=this.$input.val(),c=this.$autocomplete.text();2<b.length&&0<c.length&&this.$input.val(c)};g.handleInputChange=function(){var b=this.$input.val();this.handleSubmitVisibility(0<b.length);2<b.length?this.updateSuggestions(b):(this.writeSuggestions(""),0==b.length?this.writeAutocompleteValue(this.searchLabel):this.writeAutocompleteValue(""))};g.handleSubmitVisibility=function(k){k?this.$submit.fadeIn(function(){b(this).css("display",
"inline")}):this.$submit.fadeOut()};g.updateSuggestionList=function(b,c){if(b&&b.results){var a;this.suggestions=[];for(a=0;a<b.results.length;a++)this.suggestions.push(b.results[a].name);this.generateSuggestions(c);0<this.suggestions.length?this.writeAutocompleteValue(this.generateAutocomplete(this.suggestions[0],c)):this.writeAutocompleteValue("")}else this.writeSuggestions("")};g.generateSuggestions=function(b){var c,a="";for(c=0;c<this.suggestions.length;c++){var h=this.suggestions[c],f=this.extractSearchTermCaseSensitive(h,
b);h=h.replace(f,'\x3cspan class\x3d"highlight"\x3e'+f+"\x3c/span\x3e");h='\x3cdiv class\x3d"suggestion" data-search-term\x3d"'+this.suggestions[c]+'" tabindex\x3d"0"\x3e'+h+"\x3c/div\x3e";a+=h}this.writeSuggestions(a)};g.generateAutocomplete=function(b,c){var a=this.extractSearchTermCaseSensitive(b,c);if(0<a.length)b=c+b.substring(c.length+b.indexOf(a)),this.writeAutocompleteValue(b);else return""};g.extractSearchTermCaseSensitive=function(b,c){var a=b.toLowerCase(),h=c.toLowerCase();a=a.indexOf(h);
return 0>a?"":b.substring(a,a+c.length)};g.writeSuggestions=function(b){this.$suggestionList.html(b);this.attachClickEventToSuggestions()};g.attachClickEventToSuggestions=function(){for(var k=this,c=this.$suggestionList.find(".suggestion"),a=0;a<c.length;a++)b(c[a]).on("click",function(){k.goToSearchPage(b(this).attr("data-search-term"))}),b(c[a]).keypress(function(a){(a.keyCode?a.keyCode:a.which)==b.ui.keyCode.ENTER&&k.goToSearchPage(b(this).attr("data-search-term"))})};g.updateSuggestions=function(k){var c=
this,a=this.getGsaSuggestUrl(k);b.get(a,function(b){c.updateSuggestionList(b,k)}).fail(function(){c.updateSuggestionList("")})};g.getGlobalUXNConfig=function(){return"undefined"!==typeof window&&window.uxn?window.uxn:!1};g.getGsaSuggestUrl=function(b){if(b){var c=this.getGlobalUXNConfig(),a="";c&&c.search&&c.search.gsaBaseUrl&&c.search.gsaSuggestUrlContext&&(a=c.search.gsaBaseUrl+c.search.gsaSuggestUrlContext+"?",c.search.gsaClient&&(a+="client\x3d"+c.search.gsaClient+"\x26"),c.search.gsaSite&&(a+=
"site\x3d"+c.search.gsaSite+"\x26"),c.search.maxSuggestions&&(a+="max\x3d"+c.search.maxSuggestions+"\x26"),a+="q\x3d"+encodeURIComponent(b)+"\x26",a+="format\x3drich");return a}};g.writeAutocompleteValue=function(b){this.$autocomplete.text(b)};g.getTitle=function(){return this.title};g.init=function(){var g=this;this.$input.on("input",function(b){g.handleInputChange()});this.$input.on("keydown",function(c){l.isEventKeyCode(c,b.ui.keyCode.RIGHT)?(g.handleRightArrowPress(),g.handleInputChange()):l.isEventKeyCode(c,
b.ui.keyCode.ENTER)?g.handleSearchSubmit():l.isEventKeyCodeShift(c,b.ui.keyCode.TAB)&&(c.stopPropagation(),c.preventDefault(),g.actionsHandler.closeFlyOut())});this.$submit.on("click",function(){g.handleSearchSubmit()});this.$submit.on("keypress",function(c){(c.keyCode?c.keyCode:c.which)==b.ui.keyCode.ENTER&&g.handleSearchSubmit()});this.reset()};return m});
define("ds2-uxn-mybmw-flyout",["jquery","ds2-uxn-navigation-utils","uxn-mybmw-tracking","ds2-tracking-checker","lazyload"],function(b,l,m,g,k){var c=function(b){this.SALUTATION="{salutation}";this.FIRST_NAME="{firstName}";this.LAST_NAME="{lastName}";this.$component=b;this.$loggedoutContainer=b.find(".ds2-mybmw-content.ds2-mybmw-loggedout");this.$loggedinContainer=b.find(".ds2-mybmw-content.ds2-mybmw-loggedin");this.$buttons=b.find(".ds2-mybmw-button a");this.$links=b.find(".ds2-mybmw-links a");this.suggestions=
[];this.title="MyBMW Web";g.isDigitals2TrackingAvailable()&&(this.tracking=new m(this.$component));this.init();this.composeActionLinks();this.deleteTokenAtLogoutHandler();b[0]&&new k({container:b[0]})},a=c.prototype;a.setActionsHandler=function(b){this.actionsHandler=b};a.reset=function(){};a.afterFlyoutReopened=function(){l.focus(this.$component)};a.getTitle=function(){return this.title};a.readMyBmwData=function(){var a=this;(window.epaas&&window.epaas.api||window).addEventListener("consentcontroller.api.initialized",
function(){var c=window.consentcontroller.api.getCookie("gcdmToken"),h=b(".ds2-navigation-root").attr("lang");void 0===h&&(h=b(b("root-shell")[0].shadowRoot).find(".ds2-navigation-root").attr("lang"));if(null!=c&&""!=c&&null!=h){var e=window.location.origin+"/"+h.toLowerCase()+"/mybmwweb/api/v1/flyout/linklist";c=h.split("-").pop();b.ajax({type:"GET",url:e,headers:{market:c}}).done(function(b){a.fillIn(b)}).fail(function(b,c,h){a.tracking&&a.tracking.trackError(c,e)})}else a.fillInSalutation({})})};
a.fillIn=function(b){var a=this;this.fillInSalutation(b);this.fillInLinks(b);setTimeout(function(){a.actionsHandler.showUserLoggedInDot(!0)},300);this.showLoggedIn()};a.showLoggedIn=function(){this.$loggedoutContainer.hide();this.$loggedinContainer.show()};a.showLoggedOut=function(){this.$loggedoutContainer.show();this.$loggedinContainer.hide()};a.fillInSalutation=function(b){var a=this.$component.find(".salutation").text();a=a.replace(this.SALUTATION,b.Salutation?b.Salutation:"");a=a.replace(this.FIRST_NAME,
b.firstName?b.firstName:"");a=a.replace(this.LAST_NAME,b.lastName?b.lastName:"");this.$component.find(".ds2-mybmw-heading.ds2-mybmw-salutation").html(a)};a.fillInLinks=function(b){this.$component.find(".salutation").text();b=b.links;for(var a=this.$component.find(".ds2-mybmw-bullets.ds2-mybmw-links"),c=0;c<b.length;c++){var e='data-tracking-linkid\x3d"nsc \x3e '+b[c].linkName+": "+b[c].linkPath+'"',h="_self";if("SID_MY_PROFILE"===b[c].linkText||"SID_MY_CONFIGURATION"===b[c].linkText)h="_blank";a.append('\x3cdiv class\x3d"ds2-mybmw-bullet"\x3e    \x3ca href\x3d"'+
b[c].linkPath+'" title\x3d"'+b[c].linkName+'" target\x3d"'+h+'" class\x3d"ds2-mybmw-logged-in" '+e+"\x3e"+b[c].linkName+"\x3c/a\x3e\x3c/div\x3e")}this.$links=this.$component.find(".ds2-mybmw-links a")};a.composeActionLinks=function(){var a=b("div[data-login-button] \x3e a")[0];void 0===a&&(a=b(b("root-shell")[0].shadowRoot).find("div[data-login-button] \x3e a")[0]);if(a){var c=new URL(window.location.href),d=c.searchParams;d.set("flyout","mybmw");c.search=d.toString();c=btoa(c.toString());c=a.href.replace("targetUrl",
c);b(a).attr("href",c)}a=b("div[data-register-button] \x3e a")[0];void 0===a&&(a=b(b("root-shell")[0].shadowRoot).find("div[data-register-button] \x3e a")[0]);a&&(c=btoa(window.location.href),c=a.href.replace("targetUrl",c),b(a).attr("href",c));a=b("div[data-logout-link] \x3e a")[0];void 0===a&&(a=b(b("root-shell")[0].shadowRoot).find("div[data-logout-link] \x3e a")[0]);a&&(c=window.location.href,d=window.location.pathname.split("/"),2<d.length&&"mybmw"==d[2]&&(c=window.location.origin+"/"+d[1]+"/"+
d[2]+"/logout"),c=a.href.replace("targetUrl",c),b(a).attr("href",c))};a.deleteTokenAtLogoutHandler=function(){var a=b("div[data-logout-link] \x3e a")[0];void 0===a&&(a=b(b("root-shell")[0].shadowRoot).find("div[data-logout-link] \x3e a")[0]);b(a).on("click",function(b){b.stopPropagation();b.stopImmediatePropagation();window.consentcontroller&&window.consentcontroller.api&&window.consentcontroller.api.deletePersistence("gcdmToken")})};a.init=function(){var a=this;a.showLoggedOut();(window.epaas&&window.epaas.api||
window).addEventListener("consentcontroller.api.initialized",function(){var b=window.consentcontroller.api.getCookie("gcdmToken");null!=b&&""!=b&&a.readMyBmwData()});this.$buttons.first().keydown(function(c){l.isEventKeyCodeShift(c,b.ui.keyCode.TAB)&&(c.stopPropagation(),c.preventDefault(),a.actionsHandler.closeFlyOut())});this.$links.first().keydown(function(c){l.isEventKeyCodeShift(c,b.ui.keyCode.TAB)&&(c.stopPropagation(),c.preventDefault(),a.actionsHandler.closeFlyOut())});this.reset()};return c});
define("ds2-uxn-navigation","jquery ds2-uxn-search-flyout ds2-uxn-mybmw-flyout ds2-uxn-multilevel-flyout ds2-uxn-allmodels-flyout ds2-uxn-top-navigation-tracking ds2-uxn-navigation-utils ds2-tracking-checker ds2-resize-events focus-visible".split(" "),function(b,l,m,g,k,c,a,h){var f=function(a){this.SEARCH_DESKTOP="#id-search_desktop";this.MYBMW_DESKTOP="#id-user_desktop";this.FLYOUT_SEARCH=".ds2-flyout-search-content";this.FLYOUT_MY_BMW=".ds2-flyout-mybmw-content";this.FLYOUT_ALL_MODELS=".ds2-flyout-all-models-content";
this.FLYOUT_MULTILEVEL=".ds2-flyout-multilevel-content";this.FLYOUT_MY_BMW_PARENT="ds2-flyout-mybmw";this.$component=b(a);this.$menu=this.$component.find(".ds2-navigation-burger");this.$navigationBarRow=this.$component.find(".ds2-navigation-bar-row");this.$actionLinks=this.$component.find(".ds2-action-links");this.$actionLinksContainer=this.$component.find(".ds2-navigation-action-links");this.$logo=this.$component.find(".ds2-navigation-logo");this.$logoWhite=this.$logo.find(".ds2_white_logo");this.$logoGrey=
this.$logo.find(".ds2_grey_logo");this.$shadowLayer=this.$component.find(".ds2-shadow-layer");this.$menuitemscontainer=this.$component.find(".ds2-navigation-bar");this.$menunavigationlinksContainer=this.$menuitemscontainer.find(".ds2-navigation-items");this.$navigationContainer=this.$component.find(".ds2-navigation-container");this.$navigationContainerInner=this.$component.find(".ds2-navigation-container-inner");this.$menunavigationlinks=b(this.$menuitemscontainer).find(".ds2-navigation-link");this.$flyout=
this.$component.find(".ds2-navigation-flyout-layer");this.$flyoutWrapper=this.$flyout.find(".ds2-navigation-flyout-wrapper");this.$flyoutScrollableAreaWrapper=this.$flyoutWrapper.find(".ds2-navigation-flyout-scrollable-wrapper");this.$flyoutScrollableArea=this.$flyoutScrollableAreaWrapper.find(".ds2-navigation-flyout-scrollable");this.$mobileNavBarWrapper=this.$flyoutWrapper.find(".ds2-multilevel-flyout-nav-bar-wrapper");this.$mobileNavBar=this.$mobileNavBarWrapper.find(".ds2-multilevel-flyout-nav-bar");
this.$mobileBack=this.$mobileNavBar.find(".ds2-flyout-back_mobile");this.$flyoutTitle=this.$mobileNavBar.find(".ds2-flyout-title");this.$closeFlyOut=this.$flyoutWrapper.find(".ds2-flyout-close-icon");this.$flyoutContent=this.$flyoutWrapper.find(".ds2-navigation-flyout-content");this.$flyoutSearch=this.$flyoutContent.find(this.FLYOUT_SEARCH);this.$flyoutMyBmw=this.$flyoutContent.find(this.FLYOUT_MY_BMW);this.$flyoutAllModels=this.$flyoutContent.find(this.FLYOUT_ALL_MODELS);this.ds2AllModelsFlyoutJs=
new k(this.$flyoutAllModels);this.ds2AllModelsFlyoutJs.setActionsHandler(this);this.$uxnAasEnabled=!0;this.activeFlyout="";this.$stickQuickActionContainer=this.$flyout.find(".ds2-flyout-stick-quick-actions");this.$stickQuickAction=this.$stickQuickActionContainer.find(".ds2-flyout-quickactions");a=this.$flyoutContent.find(this.FLYOUT_MULTILEVEL);this.multilevelFlyouts={};this.multilevelFlyoutsJs={};for(var e=0;e<a.length;e++){var n=b(a[e]),d=n.attr("data-identifier"),f=new g(n);f.setActionsHandler(this);
f.setIdentifier(d);this.multilevelFlyouts[d]=n;this.multilevelFlyoutsJs[d]=f}h.isDigitals2TrackingAvailable()&&(this.$uxnAasEnabled=!1,new c(this.$component));0===b("root-shell").length&&(this.$uxnAasEnabled=!1);this.activeMenuItem=void 0;a=this.$component.find(".ds2-action-links").find(".myBmwWebEnabled");this.$menuActionLinks=(this.isMyBmwEnabled=a.attr("data-myBmwWebEnabled")&&"true"==a.attr("data-myBmwWebEnabled"))?this.$component.find(".ds2-action-link:not("+this.SEARCH_DESKTOP+","+this.MYBMW_DESKTOP+
")"):this.$component.find(".ds2-action-link:not("+this.SEARCH_DESKTOP+")");this.isBMWMbranded=b("body").hasClass("ds2-branded-bmwm");this.init()},d=f.prototype;d.updateQuickActions=function(b,a){this.$stickQuickAction.html(b.quickActionHtml);b=this.$stickQuickActionContainer.find(".ds2-flyout-stick-multilevel-left");var e=this.$stickQuickActionContainer.find(".ds2-flyout-stick-multilevel-right");a&&1==a?(b.css("width","0"),e.css("width","100%")):(b.css("width","30%"),e.css("width","70%"))};d.showMobileNavigationMenu=
function(){this.toggleSmartBanner("hide");this.showMobileNavigationShadow();this.showNavigationFullBorder(!0);this.$menuitemscontainer.addClass("ds2-navigation-bar-flex")};d.showMobileNavigationMenuWithAnimation=function(){this.showMobileNavigationMenu();this.$menuitemscontainer.css(a.getMarginProperty(),"-100vw");this.$menuitemscontainer.animate(a.getAnimationObject("0"),400);this.$menunavigationlinksContainer.css("opacity","0.2");this.$menunavigationlinksContainer.animate({opacity:"1"},400);this.fadeInShadowLayer()};
d.fadeInShadowLayer=function(){this.$shadowLayer.css("opacity","0");this.$shadowLayer.show();this.$shadowLayer.animate({opacity:"0.4"},400)};d.fadeOutShadowLayer=function(){this.$shadowLayer.animate({opacity:"0"},400);this.$shadowLayer.hide()};d.menuHandler=function(){var a=this,c=function(b){b.stopPropagation();a.markActiveLink(a.$menunavigationlinks[0]);a.makeNavigationMenuWhite(!0);a.showMobileNavigationMenuWithAnimation();a.displayLogo(!1);a.displayBurgerMenu(!1);a.displayActionLinks(!0);a.makePageScrollable(!1)};
b(this.$menu).on("click",function(b){c(event)});b(this.$menu).keypress(function(a){(a.keyCode?a.keyCode:a.which)==b.ui.keyCode.ENTER&&c(a)})};d.hideMobileNavigationMenu=function(){this.$menuitemscontainer.removeClass("ds2-navigation-bar-flex");this.$menuitemscontainer.css("margin-left","0");this.$menuitemscontainer.css("margin-right","0");this.$menunavigationlinksContainer.css("opacity","1")};d.hideMobileNavigationMenuWithAnimation=function(){var b=this;this.$menuitemscontainer.animate(a.getAnimationObject("-100vw"),
400,function(){b.hideMobileNavigationMenu()});this.$menunavigationlinksContainer.animate({opacity:"0.2"},350,function(){b.$menunavigationlinksContainer.css("opacity","1")});this.fadeOutShadowLayer()};d.closeNavigationBarMenu=function(b){this.toggleSmartBanner();this.hideMobileNavigationShadow();this.showNavigationFullBorder(!1);this.makeNavigationMenuWhite(!1);b?this.hideMobileNavigationMenuWithAnimation():this.hideMobileNavigationMenu();this.removeActiveLink();this.addPreselectedFirstLevelItemClass();
this.displayLogo(!0);this.displayBurgerMenu(!0);this.displayActionLinks(!1);this.makePageScrollable(!0)};d.displayLogo=function(b){b?(this.$logo.removeClass("ds2-navigation-logo_hidden"),this.$actionLinksContainer.removeClass("ds2-navigation-action-links--logo-hidden")):this.isMobileLayout()&&(this.$logo.addClass("ds2-navigation-logo_hidden"),this.$actionLinksContainer.addClass("ds2-navigation-action-links--logo-hidden"));0<this.$logoWhite.length&&0<this.$logoGrey.length&&(b=this.$navigationContainer.hasClass("ds2-white-bg"),
this.$logoWhite.removeClass("hidden-logo"),this.$logoGrey.removeClass("hidden-logo"),b?(this.$logoWhite.hide(),this.$logoGrey.show()):(this.$logoWhite.show(),this.$logoGrey.hide()))};d.displayBurgerMenu=function(b){b?(this.$menu.css("visibility","visible"),this.toggleSmartBanner("")):(this.$menu.css("visibility","hidden"),this.toggleSmartBanner("hide"))};d.toggleSmartBanner=function(b){var a=document.querySelector(".smartbanner-android");a={base:document.querySelector(".basecomponent.smartbanner"),
specific:a?a:document.querySelector(".smartbanner-ios")};b="hide"===b?"none":"";for(var e in a)a[e]&&(a[e].style.display=b)};d.displayActionLinks=function(b){b?this.$actionLinks.addClass("ds2-action-links_force-visible"):this.$actionLinks.removeClass("ds2-action-links_force-visible")};d.closeNaviMobile=function(a){a&&a.stopPropagation();this.closeNavigationBarMenu(!0);b(window).trigger("ds2-uxn-navigation-close")};d.closeHandler=function(){var a=this,c=this.$component.find(".ds2-close-menu .icon-close-x");
c.on("click",function(b){a.closeNaviMobile(b)});c.keypress(function(e){(e.keyCode?e.keyCode:e.which)==b.ui.keyCode.ENTER&&a.closeNaviMobile(e)});this.$navigationBarRow.keyup(function(e){(e.keyCode?e.keyCode:e.which)==b.ui.keyCode.ESCAPE&&a.closeNaviMobile(e)})};d.closeAll=function(){this.closeNavigationBarMenu(!1);this.$mobileNavBarWrapper.css("background-color","unset");this.closeFlyOut()};d.navigationLinksHandler=function(){var a=this,c=function(e){var c=b(e.target);c.attr("data-identifier")||(c=
c.parent());a.activeMenuItem=c;e.preventDefault();!a.isMobileLayout()&&c.hasClass("ds2-navigation-active-link")?a.closeFlyOut():c.attr("data-directlink")?a.handleDirectLinkOpen(c):a.handleFlyoutOpen(c);return!1};this.$menunavigationlinks.on("click",function(b){c(b)});this.$menunavigationlinks.keypress(function(b){"13"==(b.keyCode?b.keyCode:b.which)&&c(b)});this.$menuActionLinks.on("click",function(b){b.preventDefault();a.handleDirectLinkOpen(b.target)})};d.handleDirectLinkOpen=function(a){a=b(a);
a.is("a")||(a=a.parent("a"));this.loadTargetPage(a)};d.loadTargetPage=function(b){var a=b.attr("href"),e=b.attr("target");a&&setTimeout(function(){"_blank"!==e?window.location=a:window.open(a,e)},150)};d.handleFlyoutOpen=function(a){this.markActiveLink(a);b(a).attr("data-allModels")?this.openFlyOut(this.FLYOUT_ALL_MODELS):b(a).attr("data-identifier")&&this.openFlyOut(this.FLYOUT_MULTILEVEL,b(a).attr("data-identifier"))};d.removeActiveLink=function(){b.each(this.$menunavigationlinks,function(a,c){b(c).hasClass("ds2-navigation-active-link")&&
b(c).removeClass("ds2-navigation-active-link")})};d.markActiveLink=function(a){this.removeActiveLink();b(a).addClass("ds2-navigation-active-link");this.removePreselectedFirstLevelItemClass()};d.initFlyOut=function(){var a=this;this.$flyout.on("click",function(b){if(b.target!=this)if(a.activeFlyout===a.FLYOUT_MY_BMW&&b.target.className!==a.FLYOUT_MY_BMW_PARENT)a.closeFlyOut();else return;a.closeFlyOut()});this.$flyoutWrapper.keyup(function(c){(c.keyCode?c.keyCode:c.which)==b.ui.keyCode.ESCAPE&&a.closeFlyOut()});
var c=function(){a.closeFlyOut();b(window).trigger("ds2-uxn-navigation-close",b(this))};this.$closeFlyOut.on("click",function(){c()});this.$closeFlyOut.keypress(function(a){(a.keyCode?a.keyCode:a.which)==b.ui.keyCode.ENTER&&c()});var d=function(){a.closeAll();b(window).trigger("ds2-uxn-navigation-close",b(this))};this.$flyout.find(".ds2-close-all").first().click(function(a){d()});this.$flyout.find(".ds2-close-all").keypress(function(a){(a.keyCode?a.keyCode:a.which)==b.ui.keyCode.ENTER&&d()});var h=
function(b){for(var c in a.multilevelFlyoutsJs)if(a.multilevelFlyoutsJs.hasOwnProperty(c)&&(b=a.multilevelFlyoutsJs[c],b.canHandleBackAction&&b.canHandleBackAction())){b.handleBackAction();return}a.closeFlyOut()};this.$mobileBack.click(function(a){h(a)});this.$mobileBack.keypress(function(a){(a.keyCode?a.keyCode:a.which)==b.ui.keyCode.ENTER&&h(a)});var f=this.$component.find(this.SEARCH_DESKTOP);f.on("click",function(c){c.preventDefault();a.openFlyOut(a.FLYOUT_SEARCH);a.activeMenuItem=b(c.target)});
this.ds2SearchFlyout=new l(this.$flyoutSearch);this.ds2SearchFlyout.setSearchLabel(f.attr("title"));this.ds2SearchFlyout.setSearchUrl(f.attr("href"));this.ds2SearchFlyout.setActionsHandler(this);this.isMyBmwEnabled&&(this.myBmwDesktop=this.$component.find(this.MYBMW_DESKTOP),this.myBmwDesktop.on("click",function(c){c.preventDefault();a.openFlyOut(a.FLYOUT_MY_BMW);a.activeMenuItem=b(c.target)}),this.ds2MyBmwFlyout=new m(this.$flyoutMyBmw),this.ds2MyBmwFlyout.setActionsHandler(this),f=new URLSearchParams(window.location.search),
f.has("flyout")&&"mybmw"===f.get("flyout")&&setTimeout(function(){a.openFlyOut(a.FLYOUT_MY_BMW)},2E3))};d.showUserLoggedInDot=function(a){var c=this.myBmwDesktop.parent().find(".ds2-mybmw-green-dot");this.isMyBmwEnabled&&a?b(c).css("display","inline"):b(c).css("display","none")};d.openFlyOut=function(c,d){this.makePageScrollable(!1);this.makeNavigationMenuWhite(!0);this.showNavigationShadow();this.showNavigationFullBorder(!0);this.hideFlyOutsContent();this.displayLogo(!1);this.displayBurgerMenu(!1);
this.displayActionLinks(!0);this.switchCloseButtonWithNavBar(this.FLYOUT_SEARCH==c||this.FLYOUT_MY_BMW==c);this.$mobileNavBarWrapper.css("background-color",this.isBMWMbranded?"#000":"#fff");this.setQuickActionVisibility(this.FLYOUT_SEARCH!=c&&this.FLYOUT_MY_BMW!=c);this.setScrollableAreaMaxHeight(this.FLYOUT_ALL_MODELS!=c);this.makeFlyoutSmallAndRightAligned(this.FLYOUT_MY_BMW==c);this.activeFlyout=c;var e="";if(this.FLYOUT_SEARCH==c){e=this.ds2SearchFlyout.getTitle();this.ds2SearchFlyout.reset();
this.$flyoutSearch.show();var h=this.ds2SearchFlyout}else this.FLYOUT_MY_BMW==c?(e=this.ds2MyBmwFlyout.getTitle(),this.$flyoutMyBmw.show(),h=this.ds2MyBmwFlyout):this.FLYOUT_ALL_MODELS==c?(e=this.ds2AllModelsFlyoutJs.getTitle(),this.ds2AllModelsFlyoutJs.showQuickActions(),this.setFlyoutTitle(e,!1,!1),this.$flyoutAllModels.show(),h=this.ds2AllModelsFlyoutJs):this.FLYOUT_MULTILEVEL==c&&(e=this.multilevelFlyoutsJs[d].getTitle(),this.multilevelFlyoutsJs[d].showCurrentQuickActions(),this.multilevelFlyoutsJs[d].showLeftContainer(!1),
this.isMobileLayout()||this.multilevelFlyoutsJs[d].resetCss(),this.multilevelFlyoutsJs[d].preselectActiveItems(),this.multilevelFlyouts[d].show(),h=this.multilevelFlyoutsJs[d]);b(window).trigger("ds2-uxn-navigation-flyout-opened",e);this.isMobileLayout()?(this.$flyout.show(),this.$flyoutScrollableAreaWrapper.css(a.getMarginProperty(),"calc(100vw - 15px)"),this.$flyoutScrollableAreaWrapper.animate(a.getAnimationObject("0"),400),this.isNavibarMobileExpanded()?(this.$menuitemscontainer.animate(a.getAnimationObject("-100vw"),
500),this.$menunavigationlinksContainer.animate({opacity:"0.2"},400)):this.fadeInShadowLayer(),this.FLYOUT_SEARCH==c||this.FLYOUT_MY_BMW==c?this.showMobileNavigationShadow():this.isNavibarMobileExpanded()?this.hideMobileNavigationShadow():this.showMobileNavigationShadow(),this.$mobileNavBar.css("margin-top","-48px"),this.$mobileNavBar.animate({"margin-top":"0"},400)):this.$flyout.slideDown(250,function(){h&&h.afterFlyoutReopened()})};d.setFlyoutTitle=function(b,c,d){this.$flyoutTitle.html(b);c?(this.$flyoutTitle.css(a.getMarginProperty(),
"100vw"),this.$flyoutTitle.animate(a.getAnimationObject("0"),400)):d&&(this.$flyoutTitle.css(a.getMarginProperty(),"-100vw"),this.$flyoutTitle.animate(a.getAnimationObject("0"),400))};d.switchCloseButtonWithNavBar=function(a){a||!this.isMobileLayout()?(this.$closeFlyOut.show(),this.$mobileNavBarWrapper.hide()):(this.$closeFlyOut.hide(),this.$mobileNavBarWrapper.show())};d.makePageScrollable=function(a){a?b("body").css("overflow","auto"):b("body").css("overflow","hidden")};d.makeNavigationMenuWhite=
function(a){a?this.$navigationContainer.addClass(this.isBMWMbranded?"ds2-black-bg":"ds2-white-bg"):this.isStageTeaserPresent()&&this.$navigationContainer.removeClass("ds2-white-bg ds2-black-bg")};d.showNavigationShadow=function(){this.$navigationContainer.addClass("navigation-shadow")};d.hideNavigationShadow=function(){this.$navigationContainer.removeClass("navigation-shadow")};d.showMobileNavigationShadow=function(){this.$navigationContainer.addClass("navigation-shadow-mobile")};d.hideMobileNavigationShadow=
function(){this.$navigationContainer.removeClass("navigation-shadow-mobile")};d.showNavigationFullBorder=function(a){a?this.$navigationContainerInner.addClass("ds2-navigation-container-inner-full-border"):this.$navigationContainerInner.removeClass("ds2-navigation-container-inner-full-border")};d.hideFlyOutsContent=function(){this.$flyoutMyBmw.hide();this.$flyoutSearch.hide();this.$flyoutAllModels.hide();for(var a in this.multilevelFlyouts)this.multilevelFlyouts.hasOwnProperty(a)&&this.multilevelFlyouts[a].hide()};
d.setQuickActionVisibility=function(a){a?this.$stickQuickActionContainer.removeClass("ds2-flyout-stick-quick-actions_hidden"):this.$stickQuickActionContainer.addClass("ds2-flyout-stick-quick-actions_hidden")};d.setScrollableAreaMaxHeight=function(a){a?this.$flyoutWrapper.addClass("ds2-navigation-flyout-wrapper_max-height"):this.$flyoutWrapper.removeClass("ds2-navigation-flyout-wrapper_max-height")};d.makeFlyoutSmallAndRightAligned=function(a){a?(this.$flyoutScrollableAreaWrapper.addClass("ds2-navigation-flyout-scrollable-wrapper-right-aligned"),
this.$flyoutScrollableArea.addClass("ds2-navigation-flyout-scrollable-right-aligned")):(this.$flyoutScrollableAreaWrapper.removeClass("ds2-navigation-flyout-scrollable-wrapper-right-aligned"),this.$flyoutScrollableArea.removeClass("ds2-navigation-flyout-scrollable-right-aligned"))};d.closeFlyOut=function(){this.activeMenuItem&&(a.focus(this.activeMenuItem),this.activeMenuItem=void 0);this.activeFlyout="";this.hideNavigationShadow();var b=this;this.isMobileLayout()?(this.isNavibarMobileExpanded()?
(this.$menuitemscontainer.css(a.getMarginProperty(),"calc(-100vw + 15px)"),this.$menuitemscontainer.animate(a.getAnimationObject("0"),400),this.$menunavigationlinksContainer.animate({opacity:"1"},400),this.showMobileNavigationShadow(),this.showNavigationFullBorder(!0)):(this.fadeOutShadowLayer(),this.hideMobileNavigationShadow(),this.showNavigationFullBorder(!1)),this.$flyoutScrollableAreaWrapper.animate(a.getAnimationObject("100vw"),450,function(){b.$flyout.hide();b.$flyoutScrollableAreaWrapper.css(a.getMarginProperty(),
"0");b.afterCloseFlyout()}),this.$mobileNavBar.animate({"margin-top":"-48px"},400)):(this.showNavigationFullBorder(!1),this.$flyout.slideUp(300,function(){b.afterCloseFlyout()}))};d.afterCloseFlyout=function(){this.hideFlyOutsContent();var a=this.isNavibarMobileExpanded();a||(this.makePageScrollable(!0),this.makeNavigationMenuWhite(!1),this.displayLogo(!0),this.displayBurgerMenu(!0));this.displayActionLinks(a);this.removeActiveLink();this.addPreselectedFirstLevelItemClass();this.setQuickActionVisibility(!1);
this.$stickQuickAction.html("")};d.isNavibarMobileExpanded=function(){return this.$menuitemscontainer.hasClass("ds2-navigation-bar-flex")};d.initQuickActionsClick=function(){var a=this;a.$component.on("click",".ds2-uxn-navigation-quick-action",function(c){c.preventDefault();c=b(this);b(window).trigger("ds2-uxn-nav-quickaction-click",c);a.loadTargetPage(c)})};d.closeAllAndClean=function(){this.closeNavigationBarMenu(!1);this.$mobileNavBarWrapper.css("background-color","unset");this.$menuitemscontainer.css("margin-left",
"0");this.$menuitemscontainer.css("margin-right","0");this.$menunavigationlinksContainer.css("opacity","1");this.$shadowLayer.hide();this.$flyout.hide();this.$flyoutScrollableAreaWrapper.css("margin-left","0");this.$flyoutScrollableAreaWrapper.css("margin-right","0");this.afterCloseFlyout()};d.onResize=function(){var a=this.isMobileLayout();this.isMobileLayoutActive!=a&&this.closeAllAndClean();this.isMobileLayoutActive=a};d.isStageTeaserPresent=function(){return"undefined"!==typeof window&&window.uxn&&
window.uxn.stage};d.getCurrentPage=function(){var a=b("script#ds2-page-context").html();return a?JSON.parse(a)["current-page"]:""};d.cleanHtmlExtension=function(a){return 0<a.lastIndexOf(".html")?a.substring(0,a.lastIndexOf(".html")):a};d.isPathMatching=function(a,b){return-1!==a.indexOf(this.cleanHtmlExtension(b))};d.addPreselectedFirstLevelItemClass=function(){this.preselectedFirstLevelItem&&this.preselectedFirstLevelItem.addClass("ds2-navigation-link-preselected")};d.removePreselectedFirstLevelItemClass=
function(){this.preselectedFirstLevelItem&&this.preselectedFirstLevelItem.removeClass("ds2-navigation-link-preselected")};d.preselectMenuItems=function(){this.preselectedFirstLevelItem=null;var a=this.getCurrentPage();if(a){for(var c=this.$menunavigationlinksContainer.find(".ds2-navigation-item .ds2-navigation-link"),d=0;d<c.length;d++)if(b(c[d]).attr("data-directlink")&&this.isPathMatching(a,b(c[d]).attr("data-path"))){this.preselectedFirstLevelItem=b(c[d]);this.addPreselectedFirstLevelItemClass();
break}if(!this.preselectedFirstLevelItem)for(d=0;d<c.length;d++)if(!b(c[d]).attr("data-directlink")){var h=b(c[d]).attr("data-identifier"),f=this.multilevelFlyouts[h];if(f)for(var g=f.find(".ds2-first-level-item[data-directlink\x3d'directLink']"),k=0;k<g.length;k++)if(f=b(g[k]).find("a:first"),this.isPathMatching(a,b(f).attr("data-path"))){this.preselectedFirstLevelItem=b(c[d]);this.addPreselectedFirstLevelItemClass();var l=this.multilevelFlyoutsJs[h];l.setPreselectedFirstLevelLink(b(g[k]));break}}if(!this.preselectedFirstLevelItem)for(d=
0;d<c.length;d++)if(!b(c[d]).attr("data-directlink")&&(h=b(c[d]).attr("data-identifier"),f=this.multilevelFlyouts[h]))for(g=f.find(".ds2-first-level-item:not([data-directlink\x3d'directLink'])"),k=0;k<g.length;k++)for(var m=b(g[k]).attr("data-localid"),v=f.find(".ds2-second-level-container"),u=0;u<v.length;u++)if(m==b(v[u]).attr("data-localid"))for(var r=b(v[u]).find("a.ds2-second-level-item"),q=0;q<r.length;q++)if(this.isPathMatching(a,b(r[q]).attr("data-path"))){this.preselectedFirstLevelItem=b(c[d]);
this.addPreselectedFirstLevelItemClass();l=this.multilevelFlyoutsJs[h];l.setPreselectedFirstLevelLink(b(g[k]));l.setPreselectedSecondLevelLink(b(r[q]));break}if(!this.preselectedFirstLevelItem)for(d=0;d<c.length;d++)if(b(c[d]).attr("data-allmodels")&&b(c[d]).attr("data-path")&&this.isPathMatching(a,b(c[d]).attr("data-path"))){this.preselectedFirstLevelItem=b(c[d]);this.addPreselectedFirstLevelItemClass();break}}};d.handleFocusOrder=function(){var c=this;this.$closeFlyOut.keydown(function(d){if(a.isEventKeyCode(d,
b.ui.keyCode.TAB))return d.stopPropagation(),d.preventDefault(),!0;if(c.closeReturnElement&&a.isEventKeyCodeShift(d,b.ui.keyCode.TAB))return d.stopPropagation(),d.preventDefault(),a.focus(c.closeReturnElement),c.closeReturnElement=void 0,!0})};d.focusOnClose=function(b){a.focus(this.$closeFlyOut);this.closeReturnElement=b};d.init=function(){var a=this;this.menuHandler();this.closeHandler();this.navigationLinksHandler();this.initFlyOut();this.initQuickActionsClick();this.isMobileLayoutActive=this.isMobileLayout();
a=this;b(window.digitals2.resizeEvents).on("ds2ResizeSmall ds2ResizeMedium ds2ResizeLarge",function(b){a.onResize()});this.preselectMenuItems();this.handleFocusOrder();window.addEventListener("hashchange",function(){a.closeFlyOut();a.isNavibarMobileExpanded()&&a.closeNaviMobile()},!1);this.uxnAasChangeStyles(this.$uxnAasEnabled)};d.uxnAasChangeStyles=function(a){a&&(console.log("Uxn As a Service is added and the styles are changed"),this.$navigationContainer.addClass(this.isBMWMbranded?"ds2-black-bg":
"ds2-white-bg"),this.displayLogo(!0))};d.isMobileLayout=function(){return a.isMobileLayout()||a.isExtendedTabletLayout()&&this.$component.hasClass("ds2-navigation--extended-tablet-view")};return f});
define("ds2-uxn-top-navigation-tracking",["jquery"],function(b){var l={componentInfo:{componentID:"",componentName:"user_centric_navigation",componentHeadline:"na"},category:{primaryCatergory:"Navigation",subCategory01:"na"},attributes:{visible:"true",variant:"1 column"}},m={eventInfo:{eventName:"",eventAction:"click",eventPoints:"na",cause:"default",target:"na",effect:"Click",element:"Other"},category:{primaryCategory:l.category.primaryCatergory,subCategory01:l.category.subCategory01,mmdr:"na"},
attributes:{relatedComponent:{}}},g=[],k=function(a){this.$component=a;l.componentInfo.componentID=a.attr("data-component-id");m.attributes.relatedComponent=l;this.attachEvents();this.initTrackingComponent(l)},c=k.prototype;c.attachEvents=function(){this.attachLevel1NavEvents();this.attachLevel2NavEvents();this.attachLevel3NavEvents();this.attachQuickActionsNavEvents();this.attachCloseNavigationEvents()};c.attachLevel1NavEvents=function(){function a(a){return function(c){c.preventDefault();c=b(c.target);
var d=f.isLinkInternal(c);f.trackEvent({eventInfo:{eventName:f.getElementText(c,"L1"),eventAction:f.getEventAction(d,"L1"),cause:f.getElementText(c,"L1"),element:a?a:m.eventInfo.element},category:{eventType:f.getEventType(d)}},f.getSatelliteName(d))}}function c(a){return function(c){c.preventDefault();c=b(c.target);f.trackEvent({eventInfo:{eventName:f.getElementText(c,"L1"),eventAction:"Open navigation",cause:f.getElementText(c,"L1"),element:a?a:m.eventInfo.element},category:{eventType:"triggered"}},
"open_navigation");var d=c.attr("data-identifier")||c.parent().attr("data-identifier");if(d&&(d=f.$component.find('.ds2-flyout-multilevel-content[data-identifier\x3d"'+d+'"]').find(".ds2-first-level-item.ds2-first-level-item_active"),0<d.length)){d=f.getElementText(d,"L2");var e=f.getElementText(c,"L1");f.trackEvent({eventInfo:{eventName:e+" | "+d,eventAction:"Open navigation",cause:f.getElementText(c,"L1"),element:a?a:m.eventInfo.element},category:{eventType:"triggered"}},"open_navigation")}}}var f=
this,d=this.$component.find(".ds2-navigation-bar"),e=this.$component.find(".ds2-navigation-action-links");d.find('.ds2-navigation-link:not([data-directlink\x3d"true"])').on("click",c());d.find('.ds2-navigation-link[data-directlink\x3d"true"]').on("click",a());e.find(".ds2-action-link:not(#id-search_desktop)").on("click",a("Icon"));e.find("#id-search_desktop").on("click",c("Icon"))};c.attachLevel2NavEvents=function(){var a=this,c=null,f=null;b(window).on("ds2-uxn-level2-hover",function(d,e){var h=
b(e);a.isL2DirectLink(h)||(d=h.attr("data-localId"),c&&clearTimeout(c),f!==d&&(f=d,c=setTimeout(function(){h.parents(".ds2-flyout-multilevel").find('.ds2-flyout-multilevel-right .ds2-second-level-container[data-localid\x3d"'+h.attr("data-localid")+'"]').is(":visible")&&(a.pushLevel2ToLevelStack(a.getElementText(h,"L2")),a.trackLevel2Event(h,"hover"))},3E3)))});b(window).on("ds2-uxn-level2-click",function(d,e){d=b(e);a.isL2DirectLink(d)?a.trackLevel2DirectLinkEvent(d.find("a")):(a.pushLevel2ToLevelStack(a.getElementText(d,
"L2")),a.trackLevel2Event(d,"click"));clearTimeout(c)})};c.trackLevel2Event=function(a,b){var c=this.getElementText(a,"L2");a=this.getLevel1SelectedItemName(a);this.trackEvent({eventInfo:{eventName:a+" | "+c,eventAction:"Open navigation",cause:a,element:"Text link",effect:b},category:{eventType:"triggered"}},"open_navigation")};c.trackLevel2DirectLinkEvent=function(a){var b=this.isLinkInternal(a),c=this.getElementText(a,"L2");a=this.getLevel1SelectedItemName(a);this.trackEvent({eventInfo:{eventName:a+
" | "+c,eventAction:this.getEventAction(b,"L1"),cause:a},category:{eventType:this.getEventType(b)}},this.getSatelliteName(b))};c.attachLevel3NavEvents=function(){var a=this;b(window).on("ds2-uxn-level3-click",function(c,f){var d=b(f);c=a.isLinkInternal(d);f=a.getElementText(d,"L3");var e=a.getLevel1SelectedItemName(d);d=a.getLevel2SelectedItemName(d);a.trackEvent({eventInfo:{eventName:e+" | "+d+" | "+f,eventAction:a.getEventAction(c,"L1"),cause:e+" | "+d},category:{eventType:a.getEventType(c)}},a.getSatelliteName(c))})};
c.attachQuickActionsNavEvents=function(){var a=this;b(window).on("ds2-uxn-nav-quickaction-click",function(c,f){var d=b(f);c=a.isLinkInternal(d);f=a.getElementText(d,"Quick Actions: ");d=d.attr("data-nav-item");a.trackEvent({eventInfo:{eventName:d+" | "+f,eventAction:a.getEventAction(c,"L1"),cause:d},category:{eventType:a.getEventType(c)}},a.getSatelliteName(c))})};c.resetLevelStack=function(a){g=[a]};c.pushLevel2ToLevelStack=function(a){if(2<=g.length)for(;2<=g.length;)this.popLevelStack();this.pushToLevelStack(a)};
c.pushToLevelStack=function(a){g.push(a)};c.popLevelStack=function(){g.pop()};c.getPopStackCause=function(){if(!g)return"";for(var a="",b=0;b<g.length;b++)a+=g[b],b<g.length-1&&(a+=" | ");return a};c.attachCloseNavigationEvents=function(){var a=this;b(window).on("ds2-uxn-navigation-flyout-opened",function(b,c){a.resetLevelStack("L1 "+c)});b(window).on("ds2-uxn-navigation-level-3-closed",function(b){a.popLevelStack()});b(window).on("ds2-uxn-navigation-close",function(b,c){b=c?a.getPopStackCause():
"Mobile menu first screen";a.trackEvent({eventInfo:{eventName:"L1 Close",eventAction:"Close navigation",cause:b},category:{eventType:"triggered"}},"close_navigation")})};c.getElementText=function(a,b){var c=a.text().trim();return c?b+" "+c:b+" "+a.parent().text().trim()};c.getEventType=function(a){return a?"delayed":"triggered"};c.getSatelliteName=function(a){return a?"internal_click":"outbound_click"};c.getEventAction=function(a){return a?"Internal click":"Outbound click"};c.isLinkInternal=function(a){var b=
a;a.is("a")||(b=a.parent("a"));a=b.attr("href");return!a.match(/^(http[s]?:\/\/(www\.)?|ftp:\/\/(www\.)?|www\.){1}([0-9A-Za-z-\.@:%_+~#=]+)+((\.[a-zA-Z]{2,3})+)(\/(.)*)?(\?(.)*)?/)||-1!==a.indexOf(window.location.host)};c.getLevel1SelectedItemName=function(a){a=a.parents(".ds2-flyout-multilevel-content").attr("data-identifier");a=this.$component.find('.ds2-navigation-items .ds2-navigation-active-link[data-identifier\x3d"'+a+'"]');return this.getElementText(a,"L1")};c.getLevel2SelectedItemName=function(a){a=
a.parents(".ds2-flyout-multilevel-content").find(".ds2-first-level-item.ds2-first-level-item_active");return this.getElementText(a,"L2")};c.isL2DirectLink=function(a){return"directLink"===a.attr("data-directLink")};c.trackEvent=function(a,c){var f=b.extend(!0,{},a,{eventInfo:{timeStamp:Date.now().toString()}}),d=window.digitals2&&window.digitals2.tracking.api;d&&(f.category&&"delayed"===f.category.eventType?(f=b.extend(!0,{},m,a,{eventInfo:{timeStamp:Date.now().toString()}}),d.eventCookieSave(f)):
(d.addEventTracking(m,f,0),d.satelliteTrack(c)))};c.initTrackingComponent=function(a){var b=window.digitals2&&window.digitals2.tracking.api;b&&b.initComponentTracking(a,0)};return k});
define("uxn-mybmw-tracking",["jquery"],function(b){var l={componentInfo:{componentID:"nsc \x3e native in-page \x3e mybmw-login-overlay",componentName:"mybmw-login-overlay",componentHeadline:"na",componentVersion:"1.0"},category:{primaryCatergory:"nsc website",subCategory01:"navigation",componentType:"native in-page"},attributes:{visible:"true",variant:"1 column",touchpoint:"web"}},m={eventInfo:{eventName:"interaction",eventAction:"open content",eventPoints:"na",cause:"default",target:"na",element:"Other"},
category:{primaryCategory:"mybmw-login-overlay",subCategory01:"navigation",mmdr:"na",eventType:"triggered"},attributes:{requestedURL:"na",search:{label:"na"},linkedComponent:{componentInfo:{componentID:l.componentInfo.componentID}},linkedPage:{pageInfo:{pageID:"na"}},linkedProduct:{productInfo:{productID:"na"}}}},g=function(b){this.$component=b;this.attachEvents();this.initTrackingComponent(l)},k=g.prototype;k.attachEvents=function(){this.attachLevel1NavEvent();this.attachActionEvents()};k.attachLevel1NavEvent=
function(){var c=this;this.$component.closest(".ds2-navigation-root").find("a#id-user_desktop").on("click",function(){return function(a){a.preventDefault();b(a.target);c.trackEvent({eventInfo:{type:"success",eventAction:"open content",effect:"nsc \x3e fly out opened"},attributes:{requestedURL:window.location.href}},"open_navigation")}}())};k.attachActionEvents=function(){function c(c,d){return function(e){e.preventDefault();var f=b(e.target);"A"!=f.prop("tagName")&&(f=f.closest("A"));a.trackEvent({eventInfo:{type:"ux",
eventAction:c,effect:d},attributes:{requestedURL:f.attr("href")}},"open_navigation");setTimeout(function(){window.location.href=f.attr("href")},1E3)}}var a=this,g=this.$component.find(".myBmwLogin"),f=this.$component.find(".myBmwRegister"),d=this.$component.find(".myBmwLogout");g.on("click",c("outbound click","nsc \x3e login attempt"));f.on("click",c("outbound click","nsc \x3e register attempt"));d.on("click",c("internal click","nsc \x3e logout"))};k.trackError=function(b,a){this.trackEvent({eventInfo:{eventName:"error",
type:"backend 3rd party",eventAction:"call",effect:"nsc \x3e load mybmw links",cause:b},category:{subCategory01:b,subCategory02:"MyBMW",componentType:"native in-page"},attributes:{requestedURL:a}},"open_navigation")};k.trackEvent=function(c,a){c=b.extend(!0,{},c,{eventInfo:{timeStamp:Date.now().toString()}});var g=window.digitals2&&window.digitals2.tracking.api;g&&(g.addEventTracking(m,c,0),g.satelliteTrack(a))};k.initTrackingComponent=function(b){var a=window.digitals2&&window.digitals2.tracking.api;
a&&a.initComponentTracking(b,0)};return g});