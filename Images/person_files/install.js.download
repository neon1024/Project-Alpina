(function(){typeof speedKitJSErrors=="undefined"&&(window.speedKitJSErrors={});(function(){if(window!==window.top)return;window.SpeedKit=window.SpeedKit||{},SpeedKit.rumPlugins=[{key:"pageType",type:"PiDimension",on:T,set:function(){var e=window.dataLayer,t=e.pages&&e.pages[0].page&&e.pages[0].page.attributes&&e.pages[0].page.attributes.template;if(t)return t.substring(t.lastIndexOf("/")+1)}},{key:"pageTypeEnabled",type:"PiDimension",on:"domInteractive",set:function(){var e=null;try{var t=!0;window.speedKit&&speedKit.enabledSites&&(t=speedKit.enabledSites.some(function(r){return r.pathname?r.pathname.some(function(i){return typeof i!="string"?i.test(location.pathname):location.pathname.indexOf(i)===0}):!1}));var n=!1;window.speedKit&&speedKit.disabledSites&&(n=speedKit.disabledSites.some(function(r){return r.pathname?r.pathname.some(function(i){return typeof i!="string"?i.test(location.pathname):location.pathname.indexOf(i)===0}):!1})),e=t&&!n?"true":"false"}catch(r){}return e}}];var p=window.speedKitJSErrors;function m(e){if(document.readyState!=="loading")return setTimeout(e,0);document.addEventListener("DOMContentLoaded",e)}function E(e){if(document.readyState==="complete")return setTimeout(e,0);addEventListener("load",e)}function T(e,t){t.onDOMInteractive(function(){function n(){var r=window.dataLayer;if(!r){tryTracking--,setTimeout(n,500);return}e()}n()})}function l(e,t){var n=e&&e.split("\n")[0];p[n]||(p[n]=!0,E(function(){setTimeout(function(){SpeedKit.track("jsError",e,t)},1e3)}))}addEventListener("error",function(e){var t=Date.now(),n=e.message+"\n"+(e.error&&e.error.stack);l(n,t)}),m(function(){if(window.SpeedKit&&SpeedKit.dynamicBlocks&&SpeedKit.dynamicBlocks.errors.length>0){var e=SpeedKit.dynamicBlocks.errors.map(function(t){return""+t.message}).join("\n");SpeedKit.track("dynamicFetcherError",e,SpeedKit.dynamicBlocks.errors.length)}}),addEventListener("unhandledrejection",function(e){var t=Date.now(),n=JSON.stringify(e);e.reason&&(n=JSON.stringify(e.reason),e.reason.stack&&(n=e.reason.message+"\n"+e.reason.stack)),l(n,t)});function v(){var e=window.dataLayer;if(!e){setTimeout(v,500);return}var t=e&&e.pages&&e.pages[0].page&&e.pages[0].page.attributes&&e.pages[0].page.attributes.template;t&&(t=t.substring(t.lastIndexOf("/")+1),SpeedKit.track("pageType",t,0))}m(v),setTimeout(function(){try{var e=!0;window.speedKit&&speedKit.enabledSites&&speedKit.enabledSites.some(function(n){return n.pathname?n.pathname.some(function(r){return typeof r!="string"?r.test(location.pathname):location.pathname.indexOf(r)===0}):!1});var t=!1;window.speedKit&&speedKit.disabledSites&&(t=speedKit.disabledSites.some(function(n){return n.pathname?n.pathname.some(function(r){return typeof r!="string"?r.test(location.pathname):location.pathname.indexOf(r)===0}):!1})),SpeedKit.track("pageTypeEnabled",e&&!t,0)}catch(n){}}),setTimeout(function(){try{if(typeof PerformanceObserver=="undefined")return;var e={},t=!1,n=new PerformanceObserver(function(r){var i=r.getEntries(),o=i[i.length-1];e.time=o.startTime,e.url=o.url,e.id=o.id});n.observe({type:"largest-contentful-paint",buffered:!0}),addEventListener("visibilitychange",function(){e.time&&!t&&document.visibilityState==="hidden"&&(SpeedKit.track("lcp",e.url||e.id,e.time),t=!0)},!0)}catch(r){}},0);function k(){if(!(!window.PerformanceObserver||!PerformanceObserver.supportedEntryTypes||PerformanceObserver.supportedEntryTypes.indexOf("layout-shift")===-1)){var e=0,t=[],n=function(i){i.hadRecentInput||(e+=i.value,t.push(i))},r=new PerformanceObserver(function(i){i.getEntries().map(n)});r.observe({type:"layout-shift",buffered:!0}),addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&SpeedKit.track("cls",""+t.length,e)},{capture:!0,once:!0})}}setTimeout(k,0),setTimeout(function(){localStorage.removeItem("baqend-speedkit-rum-split-enabled")});try{(function(){"use strict";var e,t,n,r,i,o,y,u,f,g,w,S;e=function(a,s){var d=s.timeStamp,c=d>1e12?d-performance.timing.navigationStart:Math.floor(d);typeof SpeedKit!="undefined"&&SpeedKit.track("inputDelay",""+a,c)},i=[],o={passive:!0,capture:!0},y=+new Date,u=function(a,s){t||(t=s,n=a,r=+new Date,w(removeEventListener),f())},f=function(){n>=0&&n<r-y&&(i.forEach(function(a){a(n,t)}),i=[])},g=function(a){if(a.cancelable&&a.isTrusted){var s=(a.timeStamp>1e12?+new Date:performance.now())-a.timeStamp;a.type==="pointerdown"?function(d,c){var h=function(){u(d,c),b()},K=function(){b()},b=function(){removeEventListener("pointerup",h,o),removeEventListener("pointercancel",K,o)};addEventListener("pointerup",h,o),addEventListener("pointercancel",K,o)}(s,a):u(s,a)}},(w=function(a){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(s){a(s,g,o)})})(addEventListener),S=e,i.push(S),f()})()}catch(e){}})();})();
(function(){(function(){var s=function(){var w=navigator.userAgent.toLowerCase(),i=w.indexOf("edge")>-1,c=!i&&w.indexOf("chrome")>-1,n=!c&&w.indexOf("safari")>-1;if(n){var m=w.match(/version\/([\d+\.]+)\s/i);if(m)return m[1]>="14"}return!0}(),e=["https://www.bmw.co.uk","https://www.bmw.de","https://www.bmw.at","https://www.bmw.ie","https://www.bmw.com.cy","https://www.bmw.mu","https://www.bmw.com.mt","https://www.bmw-m.com","https://www.bmw.co.jp","https://www.bmw.co.kr","https://www.bmw.ru","https://www.bmw.com.tr","https://www.bmw.com.mx","https://www.bmw.co.th","https://www.bmw.com.my","https://www.bmw.com.tw","https://www.bmw-voli.me","https://www.bmw.co.za","https://www.bmw.cl","https://www.bmw.co.id","https://www.bmw.ua","https://www.bmw.com.co","https://www.bmwhk.com","https://www.bmw.com.ar","https://www.bmw.co.il","https://www.bmw.com.sg","https://www.bmw.rs","https://www.bmw.ma","https://www.bmw.vn","https://www.bmw.com.ec","https://www.bmw.com.pe","https://www.bmw-egypt.com","https://www.bmw.com.ph","https://www.bmw.mq","https://www.bmw.lk","https://www.bmw.md","https://www.bmw.tm.dz","https://www.bmw.com.uy","https://www.bmw.com.mo","https://www.bmw.com.do","https://www.bmw.ba","https://www.bmw.hr","https://www.bmw.co.nz","https://www.bmw-me.com","https://www.bmw.co.cr","https://www.bmw.com.mk","https://www.bmw-tunisia.com","https://www.bmw.by","https://www.bmw-kz.com","https://www.bmw.com.py","https://www.bmw.com.pa","https://www.bmw.com.gt","https://www.bmw.es","https://www.bmw.gr","https://www.bmw.lt","https://www.bmw.ro","https://www.bmw.si","https://www.bmw.in","https://www.bmw.cz","https://www.bmw.pt","https://www.bmw.sk","https://www.bmw.com.bd","https://www.bmw.az","https://www.bmw.hn","https://www.bmw.com.bo","https://www.bmwjamaica.com","https://www.bmw.am","https://www.bmw.com.ge","https://www.bmw.cc","https://www.bmw.bm","https://www.bmw.pl","https://www.bmw.dk","https://www.bmw.fi","https://www.bmw.ca","https://www.bmw.it","https://www.bmw.ee","https://www.bmw.no","https://www.bmw.lv","https://www.bmw.se","https://www.bmw-tahiti.com","https://www.bmw.co.ao","https://www.bmw.tm","https://www.bmw.ci","https://www.bmw.fr","https://www.bmw.ch","https://www.bmw.lu","https://www.bmw.com.br","https://www.bmw.re","https://www.bmw.gp","https://www.bmw.bg","https://www.bmw.com.bn","https://www.bmw.tt","https://www.bmw.com.sv","https://www.bmw.nc","https://www.bmw.com.ky","https://www.bmw.co.ke","https://www.bmw.kg","https://www.bmw-nigeria.com","https://www.bmw-ghana.com","https://www.bmw.sn","https://www.bmwmyanmar.com","https://www.bmw.bb","https://www.bmw.uz","https://www.bmw.bs","https://www.bmw.lc","https://www.bmw-lao.la","https://www.bmw.cw","https://www.bmw.mn","https://www.bmw.sr","https://www.bmw-albania.com","https://www.bmw.com.kh","https://www.bmw.nl","https://www.bmw.be","https://www.bmw.hu","https://www.bmw-yemen.com","https://www.bmw.is","https://www.bmw.ly"];function t(){return e.some(function(w){return location.href.indexOf(w)>-1})}function o(){return 1}function a(){return"100"}window.speedKit={appName:"bmw",sw:"/wrapper-sw.js?r=8d761a1a-11a0-43ab-9179-26cbde774e66&v=2.9.2",userAgentDetection:!1,rumTracking:t()&&window.activateSpeedKitRUM!==!1,split:o(),disabled:!t()||window.activateSpeedKit===!1,splitTestId:a(),enabledSites:[{pathname:[/\/index[\/.]/i,/\/home[\/.]/i,/\/topics[\/.]/i,/\/all-models[\/.]/i,/\/footer[\/.]/i,/\/models[\/.]/i,/\/fastlane[\/.]/i,/\/local-content[\/.]/i,"/de/neufahrzeuge","/de/neuwagensuche","/de/konfigurator","/de/landingpage/","/en/configurator","/fr/accueil","/fr/voiture-neuve","/fr/tous-les-modeles","/fr/gamme-bmw","/fr/configurateur.html","/ru/Online","/ru/general","/zh/news/","/zh/configurator","/ko/bmw-korea","/ko/discover","/ko/models","/ko/services","/tr/ssl/kampanya","/es/landing","/es/local","/es/modelos","/es/configurador","/es/integration/campana","/en/ssl/configurator","/th/ssl/configurator","/en/bmw-explore","/th/bmw-explore","/select-offers","/en_Za/integration/contact","/en/integration","/sr/ssl/Zakazivanje-serivsa.html","/es/landing-pages","/es/coches-bmw/","/es/informacion/","/es/configurator/","/es_ES/stocklocator.html","/es_ES/all-models/","/el_GR/configurator.html","/lt/konfiguratorius.html","/ro_RO/configurator.html","/sl/news-center","/pt_PT/configurator.html","/sk_SK/konfigurator.html","/pl/konfigurator.html","/APPS.html","/da/alle_modeller","/da/generelt","/da/byg-din-bmw.html","/fi/aiheet","/fi/rakenna-oma-bmw.html","/fi_FI/rakenna-oma-bmw.html","/fi/mallisto/","/it/gamma","/it_IT/configuratore.html","/et/configurator.html","/no_NO/bygg-din-bmw.html","/lv_LV/topics","/sv/bygg-din-bmw.html","/sv/alla-modeller","/sv/avdelning","/sv/sidfot","/de/bmw-neuwagen/","/de/bmw-neuwagen.html","/fidelidade","/nl/modellen.html","/nl/configurator.html","/nl/voorraad.html","/nl/specials","/nl_NL/specials","/nl/content/","/fr/configurateur.html","/hu/konfigurator.html","/hu_HU/konfigurator.html"]}],disabledSites:[{pathname:[/\?speedkit=off/i,/dealer-locator.html/i,/MyAccount.html/i,/mybmw/i,/mein-bmw/i,/mybmw-dashboard/i,/my-bmw/i,/topics\/offers-and-services\/used-automobiles\/our-offers\.html/,/\/lt\/topics\/offers-and-services\/bmw-online-store.html/,/\/content\/forms/i,/forms\/zamow-jazde-probna\/tda\.html/,"/da/generelt/kontakt/","/da_DK/topics/kontakt/",/locator\.html/,"/fi_FI/topics/contact/","/fi/aiheet/yhteydenotto/","/fi_FI/footer/contact/","/fi/footer/yhteydenotto/"]}],whitelist:[{host:["www.bmw.","www.bmw-m.","www.bmw-voli.me","www.bmwhk.com","www.bmw-egypt.com","www.bmw-me.com","www.bmw-tunisia.com","www.bmw-kz.com","www.bmwjamaica.com","www.bmw-tahiti.com","www.bmwmyanmar.com","www.bmw-ghana.com","www.bmw-nigeria.com","www.bmw-lao.la","www.bmw-albania.com","www.bmw-yemen.com","assets.adobedtm.com","amplify.outbrain.com","static.criteo.net","s.pinimg.com","snap.licdn.com","bmw.admo.tv","static.iadvize.com","static.bmw.1dmp.io","static.ads-twitter.com","apps.mypurecloud.de","d.line-scdn.net","cdn.smartnews-ads.com"],contentType:["script","font","style","image","navigate"]},{url:["www.googleadservices.com/pagead/conversion_async.js","www.googletagmanager.com/gtag/js","cdn.rutarget.ru/static/tag/tag.js","mc.yandex.ru/metrika/tag.js"]}],blacklist:[{host:s?[]:["cosystatic.bmwgroup.com","cosy.bmwgroup.com","api.bmw.com","api-int.bmw.com","stocklocator-dealers.bmw.com","stocklocator-dealers.bmw-int.com","c2b-services.bmw.com","c2b-services-i.bmw.com"]},{pathname:[/login/i,/\/newsletteranmeldung/i,/checkout/i,/forms/i,/video.js\/video-js.min.css/,/\/settings\/wcm\/designs\/digitals2\/static\.css/,"/etc/clientlibs/digitals2/clientlib/js/app/partials/0-sub-elements/ds2-video-layer-link.min.20210317121531.min.js"]},{url:[/registration/i,/gcdm/i,/\.pdf/i,/[?&](formtype|token)=/i,/[?&](_=1\d{12})/,/[?&]clc=/,/\/override\.css/i,"stream.bmw","bmw.scene7.com","api.bmw.com",/facebook/,/assets.adobedtm.com/,/omtrdc/,/linkedin/,/pinterest/,/sslwidget.criteo/,/demdex/,/doubleclick/,/googleads/,/googleadservices/,/\/pagead\//,/nocache/,/messagebusdefinition/,"www.bmw.co.nz/h5vco/finance/apps/html5-bmw-app.css","www.bmw.in/h5vco/finance/apps/html5-bmw-app.css",/minidigital/]},{cookie:["speedkit=off"],contentType:["document"]},{host:["www.bmw.in"],pathname:["/etc.clientlibs/settings/wcm/designs/digitals2/resources.css"]}],stripQueryParams:[{params:["gclid","msclkid","utm_source","utm_campaign","utm_medium","utm_content","utm_term","utm-source","utm-campaign","utm-medium","utm-content","utm-term","gclsrc","fbclid","ds_rl","dclid","cjid","campaign","yclid","mkwid","ctid","ccid","tblci","DMKW","DMSKW","DMCOL","n_campaign_type","sc_src","sc_lid","sc_uid","sc_llid","sc_customer","nspid","ac_delivery_internal_name","ac_delivery_label","ac_campaign_internal_name","ac_campaign_label",/^nx$/,/^ny$/,/^tl$/,"clkt","guid","_adp_p_ad","_adp_p_agr","_adp_e","_adp_c","_adp_p_cp","_adp_p_dm","_adp_p_md","_adp_u","s_kwcid","ef_id",/_kis_cup_/]}]}})();})();
(function(){(function(v,l,h,o,ee,Ze,$e){"use strict";var P="baqend-speedkit",x=P+"-user-id",V=P+"-session-id",X=P+"-session-index",_=P+"-session-timestamp";function ne(e,n,t,i){return Promise.resolve(e).then(function(r){return new Promise(function(a,c){var s=r.transaction(n,t),u=Promise.resolve(i(s.objectStore(n)));s.oncomplete=function(){return u.then(a)},s.onabort=s.onerror=function(){return c(s.error)}})})}function te(e,n,t){return ne(e,n,"readwrite",t)}function z(e,n){return n&&n!=="/"?""+(""+(n.lastIndexOf("/")===n.length-1?n.substr(0,n.length-1):n))+((e.indexOf("/")===0?"":"/")+e):e}var k,ie,re,R,oe=function(){function e(n){this.dbp=null,this.cacheName=z(P,n),this.dbp=this.openDb()}return e.prototype.get=function(n){return(t=this.db(),i="baqend-speedkit-store",r=function(a){return a.get(n)},ne(t,i,"readonly",r)).then(function(a){return a.result||null});var t,i,r},e.prototype.set=function(n,t){return te(this.db(),"baqend-speedkit-store",function(i){return i.put(t,n)&&void 0})},e.prototype.clear=function(){return Promise.all([(n=this.db(),t="baqend-speedkit-store",te(n,t,function(i){return i.clear()}).then(function(){}))]).then(function(){});var n,t},e.prototype.disconnect=function(){var n=this;return this.dbp?this.dbp.then(function(t){n.dbp=null,t.close()}):Promise.resolve()},e.prototype.db=function(){return this.dbp||(this.dbp=this.openDb()),this.dbp},e.prototype.openDb=function(){var n=this,t=indexedDB.open(this.cacheName,1);return t.onupgradeneeded=function(i){var r=i.oldVersion,a=t.result;if(r<1){if(!a)return;a.createObjectStore("baqend-speedkit-store")}},this.openRequest(t).then(function(i){return i.onclose=function(){n.dbp=null},i.onerror=function(){n.dbp=null},i.onversionchange=function(r){r.newVersion||(n.dbp=null,i.close())},i})},e.prototype.openRequest=function(n){return new Promise(function(t,i){n.onsuccess=function(){return t(n.result)},n.onerror=function(){return i(n.error)},n.onblocked=function(){return i(n.error)}})},e}();(function(){function e(){this.map=new Map}e.prototype.get=function(n){return Promise.resolve(this.map.get(n)||null)},e.prototype.set=function(n,t){return this.map.set(n,t),Promise.resolve()},e.prototype.clear=function(){return this.map.clear(),Promise.resolve()}})();function A(e){v.readyState!=="complete"?window.addEventListener("load",function(){return e()}):e()}function ae(e){return parseFloat((1-e).toFixed(2))}function q(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t={};return e.forEach(function(i){Object.keys(i).forEach(function(r){return t[r]=i[r]})}),t}(function(e){e.Blacklist="Blacklist",e.ClientError="ClientError",e.CORSRedirect="CORSRedirect",e.CriticalResource="CriticalResource",e.Delayed="Delayed",e.Disabled="Disabled",e.Disconnected="Disconnected",e.DynamicBlock="DynamicBlock",e.DynamicBlockPreload="DynamicBlockPreload",e.Error="Error",e.Fallback="Fallback",e.Fetchlist="Fetchlist",e.FirstLoad="FirstLoad",e.GroupChange="GroupChange",e.IgnoredAfterPOSTNavigate="IgnoredAfterPOSTNavigate",e.InternalServerError="InternalServerError",e.LoopDetected="LoopDetected",e.NavigationPreload="NavigationPreload",e.NonSKGroup="NonSKGroup",e.NoSwInstalled="NoSwInstalled",e.NoSwResponse="NoSwResponse",e.Offline="Offline",e.Onboarding="Onboarding",e.SafeScript="SafeScript",e.SwFailed="SwFailed",e.SwUnsupported="SwUnsupported",e.TrackingRequest="TrackingRequest",e.Unknown="Unknown",e.Immutable="Immutable"})(k||(k={})),function(e){e.CacheMiss="CacheMiss",e.ExpiredResponse="ExpiredResponse",e.InstantRefresh="InstantRefresh",e.InvalidCacheSketch="InvalidCacheSketch",e.ReloadCacheMode="ReloadCacheMode",e.UrlInCacheSketch="UrlInCacheSketch"}(ie||(ie={})),function(e){e.CacheHit="CacheHit",e.RevalidationWhitelist="RevalidationWhitelist"}(re||(re={})),function(e){e.SWException="SWException",e.BloomfilterException="BloomfilterException",e.DashboardDisabled="DashboardDisabled",e.ServerError="ServerError",e.None="None"}(R||(R={}));var K,B,S,Ce={performanceOnly:!1,stripAllParameter:!1,noCookies:!1,noTracking:!1,pageDisabled:!1};function C(){var e=q({},Ce);return o.rumTracking?typeof o.rumTracking=="boolean"?e:q(e,o.rumTracking):q(e,{noTracking:!0})}function se(){var e=typeof PerformanceNavigationTiming!="undefined"&&window.performance.getEntriesByType,n=performance.navigation;if(!e)return n.type;var t=performance.getEntriesByType("navigation");return t[0]&&"toJSON"in t[0]?K[t[0].type]:n.type}function Q(){return window.performance?performance.timing.navigationStart||Math.trunc(performance.timeOrigin):0}function Ee(e){var n=Q(),t=function(i){var r=function(){var p=typeof PerformanceNavigationTiming!="undefined"&&performance.getEntriesByType,f=window.performance.timing;if(!p)return f;var m=performance.getEntriesByType("navigation");return m[0]&&"toJSON"in m[0]?m[0].toJSON():f}(),a=window.performance.timing,c="entryType"in r,s={};for(var u in r)if(typeof r[u]=="number"){var d=r[u]!==0,g=a&&(typeof a[u]!="number"||a[u]!==0);s[u]=d||g?c?Math.trunc(r[u]):r[u]>=i?r[u]-i:r[u]:-1}else s[u]=r[u];return s.navigationStart=i,s.domLoading=a.domLoading-i,s.ttfb=c?s.responseStart:a.domLoading-i,s}(n);e.set("navigationStart",n,!1),e.set("secureConnectDuration",t.secureConnectionStart>=0&&t.connectEnd>=0?t.connectEnd-t.secureConnectionStart:-1,!1),e.reportEvent("unload",t.unloadEventStart,"unloadDuration",t.unloadEventEnd),e.reportEvent("domainLookup",t.domainLookupStart,"domainLookupDuration",t.domainLookupEnd),e.reportEvent("connect",t.connectStart,"connectDuration",t.connectEnd),e.reportEvent("redirect",t.redirectStart,"redirectDuration",t.redirectEnd),e.reportEvent("response",t.responseStart,"responseDuration",t.responseEnd),e.reportEvent("load",t.loadEventStart,"loadDuration",t.loadEventEnd),e.reportEvent("domContentLoaded",t.domContentLoadedEventStart,"domContentLoadedDuration",t.domContentLoadedEventEnd),e.reportEvent("request",t.requestStart),e.reportEvent("fetch",t.fetchStart),e.reportEvent("ttfb",t.ttfb),e.reportEvent("domComplete",t.domComplete),e.reportEvent("domInteractive",t.domInteractive),e.reportEvent("workerStart",t.workerStart)}function F(e,n){var t=e.rumController,i=!!o.secondaryGroup,r=i?e.splitTestId+"-"+o.secondaryTestId:e.splitTestId,a=function(){if(C().stripAllParameter)return location.href.replace(/\?.*/,"?redacted");if(C().stripParameters){var s=new URL(location.href);return C().stripParameters.forEach(function(u,d){var g=new URL(location.href).searchParams.get(u)||"",p=g.length?u+"="+g:u;s.search=s.search.replace(new RegExp("(\\?|&)"+p),"$1redacted-"+d)}),s.href}return location.href}();i&&t.updateBaseDimension("testGroup",o.group+"-"+o.secondaryGroup),C().performanceOnly||t.set("sessionIndex",e.sessionIndex,!1);var c=Q();t.reportEvent("snippetExecution",e.executionTime-c),t.set("url",a,!0,!1),t.set("userAgent",l.userAgent,!1),t.set("referrer",v.referrer,!1),t.set("testId",r||"None",!1),t.set("responseSource",e.lastNavigate.responseSource,!1),t.set("assetTTFB",e.lastNavigate.assetTTFB,!1),t.set("assetSource",e.lastNavigate.assetSource,!1),t.set("firstLoad",e.lastNavigate.firstLoad,!1),t.set("disabled",e.disabled,!1),typeof window.performance!==void 0&&(Ee(t),function(s){var u=se();u!==void 0&&s.set("navigationType",u,!1)}(t),function(s){if(typeof PerformancePaintTiming!="undefined"&&window.performance.getEntriesByType){var u=performance.getEntriesByType("paint");if(u&&u.length){var d=u.find(function(f){return f.name==="first-paint"}),g=u.find(function(f){return f.name==="first-contentful-paint"});s.set("firstPaint",d?Math.round(d.startTime):-1,!1),s.set("firstContentfulPaint",g?Math.round(g.startTime):-1,!1)}}else if(window.performance!==void 0){var p=performance.timing.msFirstPaint;p&&(s.setTiming("firstPaint",p,!1),s.setTiming("firstContentfulPaint",p,!1))}}(t)),function(s,u){if(s.controllingServiceWorker&&u.set("controllingSw",s.controllingServiceWorker,!1),s.lastNavigate.responseCause!==k.Unknown&&u.set("responseCause",s.lastNavigate.responseCause,!1)&&u.set("responseSource",s.lastNavigate.responseSource,!1,!0),s.lastNavigate.disconnectCause!==R.None&&s.lastNavigate.disconnectCause!==R.DashboardDisabled&&u.set("disconnectCause",s.lastNavigate.disconnectCause,!1),typeof s.split=="number"){var d=s.group==="A"&&typeof o.secondarySplit=="number"?o.secondaryGroup==="B"?ae(o.secondarySplit):o.secondarySplit:1;u.set("split",s.split*d,!1)}s.lastNavigate.splitTestId!==s.splitTestId&&u.set("actualTestId",""+s.lastNavigate.splitTestId,!1),s.lastNavigate.group!==s.group&&u.set("actualTestGroup",""+s.lastNavigate.group,!1)}(e,t),function(s,u){s.lastNavigate.cdnBackendTime&&u.set("cdnBackendTime",s.lastNavigate.cdnBackendTime,!1),s.lastNavigate.cdnPoP&&u.set("cdnPop",""+s.lastNavigate.cdnPoP,!1)}(e,t),function(s,u){var d=s.lastNavigate?s.lastNavigate.timings:null;d&&(u.setTiming("speedKitFetchEvent",d.eventStart,!1),u.setTiming("speedKitHandle",d.handleStart,!1),d.handleStart!==void 0&&d.handleEnd!==void 0&&u.set("speedKitHandleDuration",d.handleEnd-d.handleStart,!1),d.cacheStart!==void 0&&d.cacheEnd!==void 0&&u.reportEvent("speedKitCacheLookup",d.cacheStart-d.handleStart,"speedKitCacheLookupDuration",d.cacheEnd-d.handleStart),d.fetchStart!==void 0&&d.fetchEnd!==void 0&&u.reportEvent("speedKitFetchCall",d.fetchStart-d.handleStart,"speedKitFetchCallDuration",d.fetchEnd-d.handleStart))}(e,t),n?t.sendCurrentTracking(n):t.sendCollapsed()}function Ie(e){var n,t=!1,i=!1,r=!1,a=function(){t&&i&&r&&F(e)};A(function(){setTimeout(function(){t=!0,a()})}),function(c,s){c.readyState!=="complete"?window.addEventListener("speed-kit-completed",s,{once:!0}):s()}(e,function(){i=!0,a()}),n=function(){r=!0,a()},typeof PerformancePaintTiming!="undefined"&&window.performance.getEntriesByType&&performance.getEntriesByType("paint").length>0||typeof PerformanceObserver=="undefined"||typeof PerformancePaintTiming=="undefined"?n():new PerformanceObserver(n).observe({entryTypes:["paint"]})}function U(e){e.readyState!=="complete"&&setTimeout(function(){var n,t,i,r;e.readyState="complete",n="speed-kit-completed",t=window,i===void 0&&(i={}),typeof CustomEvent=="function"?r=new CustomEvent(n,{detail:i}):(r=v.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)})}function ue(e,n,t,i){i===void 0&&(i=1e3);var r=!1;return t&&setTimeout(function(){return r?null:t()},i),new Promise(function(a,c){var s=new MessageChannel,u=s.port1,d=s.port2;u.onmessage=function(g){r=!0,a(g.data)},u.onmessageerror=function(g){return c(g.data)},e.postMessage(n,[d])})}function M(){return!!v.querySelector(".speed-kit-dynamic-loading,.speed-kit-dynamic-loaded")}function H(e){return e===void 0&&(e=25),function(n){var t=[];t.length=n;for(var i=0;i<n;)t[i]=0,i+=1;return t}(e).map(function(){return Math.floor(62*Math.random())}).map(function(n){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n]}).join("")}function ce(e,n){try{if(l.sendBeacon&&l.sendBeacon(e,JSON.stringify(n)))return}catch(i){}var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(n))}function N(e){var n=Date.now(),t=e.message+"\n"+e.stack;window.SpeedKit&&window.SpeedKit.track||(window.SpeedKit=window.SpeedKit||{},window.SpeedKit.navigateId=window.SpeedKit.navigateId||""+H(32),window.SpeedKit.group=window.SpeedKit.group||"sk",window.SpeedKit.track=De),window.SpeedKit.track("snippetError",t,n)}function De(e,n,t){if(!C().noTracking){var i={action:""+e,label:""+n,value:isNaN(Number(t))?0:Number(t)},r={navigate:SpeedKit.navigateId,group:SpeedKit.group,events:[i]};ce("https://"+(o.appDomain||"{}.app.baqend.com".replace("{}",o.appName))+"/v1/rum/pi",r)}}function Pe(e,n){ue(e,{type:"get-navigate-info",clientURL:location.href},function(){n.lastNavigate.responseSource=M()?S.AssetAPI:S.Origin,n.lastNavigate.responseCause=k.NoSwResponse,U(n)}).catch(function(t){return N(t),null}).then(function(t){(function(i,r){if(!(!r||"wasCacheHit"in r)){if("reason"in r)return i.lastNavigate.applicationState=r.applicationState,i.lastNavigate.errorMessage=r.reason,void(r.applicationState===B.FAILED&&(i.lastNavigate.responseCause=k.SwFailed));r.firstLoad=i.lastNavigate.firstLoad;var a=r.responseSource===S.Origin;r.assetSource||r.assetTTFB||(r.assetSource=i.lastNavigate.assetSource,r.assetTTFB=i.lastNavigate.assetTTFB),i.lastNavigate=r,i.lastNavigate.applicationState=B.RUNNING,i.lastNavigate.responseCause=r.responseCause,i.lastNavigate.responseSource=a&&M()?S.SDN:r.responseSource,i.lastNavigate.originStatus=r.originStatus,i.lastNavigate.disconnectCause=r.disconnectCause,i.lastNavigate.assetTTFB=r.assetTTFB}})(n,t),U(n)})}function Ne(e){return fetch(o.appURL+"/config/VAPIDPublicKey").then(function(n){return n.arrayBuffer()}).then(function(n){return{applicationServerKey:n,userVisibleOnly:!0}}).then(function(n){return e.subscribe(n)}).then(function(n){var t={subscription:n,devicetype:"WebPush"};return fetch(o.appURL+"/db/Device/register",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}).then(function(n){return n.status===200},function(){return!1})}function Le(){return"Notification"in window?Notification.requestPermission().then(function(e){return e==="denied"?"denied":e!=="granted"?"undecided":l[h].ready.then(function(n){var t=n.pushManager;return function(i){return i.getSubscription().then(function(r){return!!r})}(t).then(function(i){return!!i||Ne(t)})}).then(function(n){return n?"registered":"unregistered"})}):Promise.resolve("unsupported")}function G(e,n){if(typeof Storage!="undefined")try{localStorage.setItem(e,n)}catch(t){}}(function(e){e[e.navigate=0]="navigate",e[e.reload=1]="reload",e[e.back_forward=2]="back_forward",e[e.prerender=3]="prerender",e[e.reserved=255]="reserved"})(K||(K={})),function(e){e.INSTALLING="installing",e.RUNNING="running",e.FAILED="failed"}(B||(B={})),function(e){e.AssetAPI="AssetAPI",e.Shield="Shield",e.Storage="Storage",e.Edge="Edge",e.Collapsed="Collapsed",e.PendingAsset="PendingAsset",e.Stream="Stream",e.MissingCachingHeader="MissingCachingHeader",e.Generated="Generated",e.Origin="Origin",e.SwCache="SwCache",e.SDN="SDN"}(S||(S={}));var Oe=["baqend-speedkit-user-id","baqend-speedkit-ab-test-info"];function D(e,n){if(G(e,n),!(C().noCookies||Oe.indexOf(e)<0)){var t=o.cookieLifetime||180,i=new Date(Date.now()+24*t*60*60*1e3).toUTCString();v.cookie=e+"="+n+"; expires="+i+"; path=/; SameSite=Lax; Secure"}}function L(e){var n=null;if(typeof Storage!="undefined")try{n=localStorage.getItem(e)}catch(t){}return n}function I(e){var n=L(e),t=function(r){var a=new RegExp(r+"=([^,;]*)"),c=v.cookie.match(a);return!c||!c[1]?null:c[1]}(e),i=n||t;return i&&n!==t&&D(e,i),i}function Re(){var e,n=C();if(!n.noTracking&&!n.performanceOnly){var t=H(),i=0;if((e=I(_))&&(Date.now()-parseInt(e,10))/1e3<=o.sessionLifetime){t=I(V);var r=""+(I(X)||-1);i=parseInt(r,10)+1}return D(V,t),D(X,""+i),D(_,Date.now().toString()),[t,i]}return["",0]}function de(e,n){return!(Array.isArray(e)&&!Array.isArray(n)||!Array.isArray(e)&&Array.isArray(n))&&typeof e==typeof n&&(Array.isArray(e)?e.length===n.length:typeof e=="object"?function(t,i){var r=0,a=0;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&(r+=1,!de(t[c],i[c])))return!1;for(var c in i)a+=1;return r===a}(e,n):e===n)}function pe(e){v.readyState==="loading"?v.addEventListener("DOMContentLoaded",function(){return e()}):setTimeout(e,0)}function Be(e){v.querySelector("html.speed-kit-dynamic-loaded")?setTimeout(e,0):v.addEventListener("speed-kit-loaded",function(){return e()})}var xe=function(){function e(){this.dataLayerObservers=[]}return e.prototype.onDataLayer=function(n){if(!this.dataLayerObservers.length){var t=this.dataLayerObservers;this.observeDataLayer(function(){for(var i=function(u){setTimeout(function(d){return u.apply({},d)},0,r)},r=arguments,a=0,c=t;a<c.length;a++){var s=c[a];i(s)}})}this.dataLayerObservers.push(n)},e.prototype.observeDataLayer=function(n){pe(this.initDataLayer.bind(this,n))},e.prototype.initDataLayer=function(){var n=arguments[0],t=window.dataLayer;if(t){var i=t.push;t.push=function(){var c=Array.prototype.slice.call(arguments),s=i.apply(t,c);return n.apply(t,c),s};for(var r=0;r<t.length;r+=1)n.call(t,t[r])}else setTimeout(this.initDataLayer.bind(this,n),500)},e}(),Ae=function(){function e(n){this.rumController=n,this.triggerFunctions={domInteractive:this.rumController.onDOMInteractive,load:this.rumController.onLoad,speedKitLoaded:this.rumController.onSpeedKitLoaded,dataLayer:this.rumController.onDataLayer.bind(this.rumController),visibilityHidden:this.rumController.onVisibilityHidden,dfDataReady:this.rumController.onDfDataReady,leavePage:this.rumController.onLeavePage.bind(this.rumController)}}return e.prototype.initPlugin=function(n){n.type||(n.type="Data");var t=function(r){return r()};typeof n.on=="string"?n.on=this.triggerFunctions[n.on]||t:n.on=n.on||t;var i=this.generateCallbackFunction(n);n.on(i,this.rumController)},e.prototype.generateCallbackFunction=function(n){var t=this;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(n.track){var a=[t.rumController].concat(i);n.track.apply(n,a)}else if(n.key&&(n.set||n.append||n.setTiming)){var c=t.getControllerFunction(n),s=t.getTrackingFunction(n),u=s.apply(n,i);u!=null&&c.call(t.rumController,n.key,u)}}},e.prototype.getControllerFunction=function(n){return n.setTiming?this.rumController.setTiming:n.set?this.rumController.set:this.rumController.append},e.prototype.getTrackingFunction=function(n){return n.setTiming||n.set||n.append},e}();function qe(e){v.addEventListener("visibilitychange",function(){v.visibilityState==="hidden"&&e()},!0)}function Ke(e){SpeedKit&&SpeedKit.dynamicBlocks&&SpeedKit.dynamicBlocks.complete&&SpeedKit.dynamicBlocks.dataComplete||!v.querySelector("html.speed-kit-dynamic-loading")?setTimeout(e,0):v.addEventListener("dynamic-fetcher-data-ready",function(){return e()})}var Fe=function(){function e(){this.callbacks=[],this.unloaded=!1}return e.prototype.init=function(){var n=this;v.addEventListener("visibilitychange",function(){v.visibilityState==="hidden"?n.prepareBeforeLeaving("visibilityChange"):v.visibilityState==="visible"&&(n.unloaded=!1)}),"onpagehide"in window?window.addEventListener("pagehide",function(){return n.prepareBeforeLeaving("pagehide")}):(window.addEventListener("beforeunload",function(){return n.prepareBeforeLeaving("beforeunload")}),window.addEventListener("unload",function(){return n.prepareBeforeLeaving("unload")}))},e.prototype.onLeavePage=function(n){this.callbacks.push(n)},e.prototype.executeRemainingCallbacks=function(){for(var n=0,t=this.callbacks;n<t.length;n++)(0,t[n])();this.callbacks=[]},e.prototype.prepareBeforeLeaving=function(n){var t=SpeedKit;this.executeRemainingCallbacks(),F(t,n),this.unloaded=!0},e.prototype.isUnloaded=function(){return this.unloaded},e}(),Ue=function(){function e(n,t){this.beaconIndex=0,this.init=n,this.sentTracking=Object.create(n),this.unsentTracking={},this.customTimers={},this.shouldTrackPI=t,this.dataLayerHandler=new xe,this.leavePageHandler=new Fe,this.customDimensions=[{name:"customPiDimensions",type:"PiDimension",dimensionData:{}},{name:"customSessionDimensions",type:"SessionDimension",dimensionData:{}}],this.onDOMInteractive=pe,this.onLoad=A,this.onSpeedKitLoaded=Be,this.onDataLayer=this.dataLayerHandler.onDataLayer.bind(this.dataLayerHandler),this.onDfDataReady=Ke,this.onVisibilityHidden=qe,this.onLeavePage=this.leavePageHandler.onLeavePage.bind(this.leavePageHandler);var i=this.getPlugins();this.pluginHandler=new Ae(this),i.forEach(this.pluginHandler.initPlugin,this.pluginHandler),this.initCustomTimerData(i),this.initCustomDimensionData(i),this.leavePageHandler.init()}return e.prototype.reportEvent=function(n,t,i,r){if(!(t===void 0||t<0)&&(this.reportTracking(n,t),r!==void 0&&i)){var a=r-t;if(a<0)return;this.reportTracking(i,a)}},e.prototype.sendCurrentTracking=function(n){if(!C().noTracking){var t=this.getUnsentTracking();if(t){n&&(t.unloadType=n);var i="";t.beaconIndex===0&&(i="?pi=1"+(this.shouldTrackPI?"&bqpi=1":"")),this.shouldTrackPI=!1,ce(o.appURL+"/rum/pi"+i,t)}}},e.prototype.updateBaseDimension=function(n,t){this.init[n]=t},e.prototype.trackCustomEvent=function(n,t,i,r){r===void 0&&(r=!0);var a={action:""+n,label:""+t,value:isNaN(Number(i))?0:Number(i)};this.reportTracking("events",a,!0),r&&this.sendCollapsed()},e.prototype.set=function(n,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var a=this.reportTracking(n,t,!1,r);return i&&this.sendCollapsed(),a},e.prototype.setTiming=function(n,t,i,r){return i===void 0&&(i=!0),r===void 0&&(r=!1),typeof t=="number"?this.set(n,t-this.init.navigationStart,i,r):this.set(n,t,i,r)},e.prototype.append=function(n,t,i){i===void 0&&(i=!0),this.reportTracking(n,t,!0),i&&this.sendCollapsed()},e.prototype.getBeaconIndex=function(){return this.beaconIndex},e.prototype.calculateRelative=function(n){if(n!==void 0)return n-this.init.navigationStart},e.prototype.reportTracking=function(n,t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r=!1),t==null)return!1;var a=this.customDimensions.filter(function(d){return d.dimensionData.hasOwnProperty(n)})[0];if(a)return this.reportCustomDimension(n,t,a.type);if(this.customTimers.hasOwnProperty(n))return this.reportCustomTimer(n,t);if(i){var c=Array.isArray(t)?t:[t],s=this.unsentTracking[n]!==void 0?this.unsentTracking[n]:[],u=Array.isArray(s)?s:[s];return this.unsentTracking[n]=u.concat(c),!0}return!(!Array.isArray(t)&&de(t,this.sentTracking[n])&&!r)&&(this.unsentTracking[n]=t,!0)},e.prototype.reportCustomDimension=function(n,t,i){if(typeof t!="string")return!1;var r=this.customDimensions.filter(function(c){return c.type===i})[0];if(!r||r.dimensionData[n]&&r.dimensionData[n]!=="null")return!1;r.dimensionData[n]=t;var a=this.unsentTracking[r.name]||{};return a[n]=t,this.unsentTracking[r.name]=a,!0},e.prototype.reportCustomTimer=function(n,t){if(typeof t!="number"||this.customTimers[n]&&this.customTimers[n]!==-1)return!1;this.customTimers[n]=t;var i=this.unsentTracking.customTimers||{};return i[n]=t,this.unsentTracking.customTimers=i,!0},e.prototype.getPlugins=function(){return window.SpeedKit&&window.SpeedKit.rumPlugins?window.SpeedKit.rumPlugins:[]},e.prototype.initCustomDimensionData=function(n){var t=this;n.forEach(function(i){i.key&&(t.customDimensions.every(function(r){return r.type!==i.type})||t.reportCustomDimension(i.key,"null",i.type))})},e.prototype.initCustomTimerData=function(n){var t=this;n.forEach(function(i){i.key&&i.type==="CustomTimer"&&(t.customTimers[i.key]=-1)})},e.prototype.getUnsentTracking=function(){if(Object.keys(this.unsentTracking).length===0)return null;var n=Object.create(null);for(var t in this.init)Object.prototype.hasOwnProperty.call(this.init,t)&&(n[t]=this.init[t]);for(var t in n.beaconIndex=this.beaconIndex,this.unsentTracking)Object.prototype.hasOwnProperty.call(this.unsentTracking,t)&&(n[t]=this.unsentTracking[t],this.sentTracking[t]=this.unsentTracking[t]);return this.unsentTracking=Object.create(null),this.beaconIndex+=1,n},e.prototype.sendCollapsed=function(){var n=this;this.leavePageHandler.isUnloaded()?this.sendCurrentTracking():setTimeout(function(){n.sendCurrentTracking()},100)},e}();function le(e){var n=l[h];n&&n.ready.then(function(t){n.controller&&n.controller.postMessage({type:"update-device",data:e})})}function Me(e){var n=l[h].controller;n&&n.postMessage({type:"bypass-deactivation",data:e})}function He(){var e=l[h];e&&e.controller&&e.controller.postMessage({type:"connect"})}function Ge(){var e=l[h];e&&e.controller&&e.controller.postMessage({type:"disconnect"})}function We(){var e=L("baqend-speedkit-hashing-salt");if(e)return e;var n=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",r=0;r<32;r+=1)i+=t.charAt(Math.floor(Math.random()*t.length));return i}();return G("baqend-speedkit-hashing-salt",n),n}function je(e){return function(n,t){for(var i="",r=0;r<n.length;r+=1){var a=r%t.length;i+=(n.charCodeAt(r)^t.charCodeAt(a)).toString(32)}return i}(e,We())}function Je(e){var n=l[h].controller;n&&n.postMessage({type:"offline",data:e})}function fe(){var e=l[h].controller;e&&e.postMessage({type:"fetch-bloom-filter",data:!0})}function W(){return o.disabled||o.enabled===!1}function ge(e){return e===k.SwUnsupported}function Ve(e){var n,t,i,r=Re(),a=r[0],c=r[1],s=function(){var T=C();if(!T.noTracking&&!T.performanceOnly){var O=I(x);if(O)return O;var j=H();return D(x,j),j}return""}(),u=o.group,d=((n=window.SpeedKit)===null||n===void 0?void 0:n.navigateId)||""+H(32),g={userId:s,sessionId:a},p={navigationStart:Q(),testGroup:u,piId:d},f=C().performanceOnly?p:q(p,g),m=(t=e.responseCause,i=!C().pageDisabled,(W()||ge(t))&&i&&o.group!=="B"),b=new Ue(f,m),y=b.trackCustomEvent.bind(b),w={navigateId:d,userId:s,sessionId:a,sessionIndex:c,group:u,rumController:b,track:y,subscribe:Le,bypassDeactivation:Me,activate:He,deactivate:Ge,split:typeof o.split=="number"?o.group==="B"?ae(o.split):o.split:1,updateDevice:le,getHash:je,simulateOfflineMode:Je,fetchBloomFilter:fe,disabled:!1,lastNavigate:e,readyState:"loading",splitTestId:o.splitTestId,controllingServiceWorker:Xe(),executionTime:Date.now()},E=window.SpeedKit||{};return Object.keys(E).forEach(function(T){w[T]=E[T]}),window.SpeedKit=w,window.SpeedKit}function Xe(){return l.serviceWorker&&l.serviceWorker.controller?l.serviceWorker.controller.scriptURL:null}function ve(e){var n=l[h].controller;n&&n.postMessage({event:e,type:"send-cookies",data:v.cookie})}function he(e,n){var t=n==="baqend-speedkit-secondary-ab-test-info",i=function(a,c){var s=a.testId!=="undefined",u=a.group!=="undefined",d=c?o.secondaryTestId:o.splitTestId,g=s&&(p=a.testId,f=d,(p==null?void 0:p.replace("-debug",""))!==(f==null?void 0:f.replace("-debug",""))),p,f;if(u&&!g)return a.group;var m=c?o.secondaryGroup:o.group,b=c?o.secondarySplit:o.split;return function(y,w){return y===void 0?Math.random()<w?"A":"B":y}(m,b)}(e,t),r=t?o.secondaryTestId:o.splitTestId;return r&&(r=function(a){return L("baqend-speedkit-debug")!=="true"?a.replace("-debug",""):a.indexOf("-debug")>-1?a:a+"-debug"}(r)),function(a,c,s){u=s,d=encodeURIComponent(JSON.stringify(a)),g=encodeURIComponent(JSON.stringify(c)),g!==d&&g&&D(u,g);var u,d,g}(e,{group:i,testId:r},n),{group:i,splitTestId:r}}function me(e){var n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],t=null;if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],["IE",parseInt(t[1],10)||0];var i=function(a){if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/.test(a)){var c=a.match(/(OS |os |OS)(\d+)/i)||[];return["SafariWebView",parseInt(c[2],10)||0]}return null}(e)||function(a,c){if(c[1]==="Chrome"){var s=null;if((s=a.match(/\bEdg\/(\d+)/)||a.match(/\bEdge\/(\d+)/))!=null)return["Edge",parseInt(s[1],10)];if((s=a.match(/\bOPR\/(\d+)/))!=null)return["Opera",parseInt(s[1],10)]}return null}(e,n);if(i!==null)return i;var r=n[2]?[n[1],parseInt(n[2],10)]:[l.appName,parseInt(l.appVersion,10)];return e.indexOf("Android")===-1&&(t=e.match(/version\/(\d+)/i))!=null&&r.splice(1,1,parseInt(t[1],10)),r}function ye(){return I(x)===null}function _e(e,n,t,i){var r=function(s,u){return!!l[h]&&!!l[h].getRegistrations&&function(d,g){return d==="Chrome"?g>=61:d!=="Firefox"||g!==59}(s,u)&&!!window.caches}(e,n)&&!t,a=ye(),c=o.group==="B"||o.secondaryGroup==="B";return r?!c&&W()?[S.Origin,k.Disabled]:a?[S.Origin,k.FirstLoad]:!c&&i?[S.Origin,k.GroupChange]:l[h].controller?[M()?S.AssetAPI:S.Origin,k.Unknown]:[S.Origin,c?k.NonSKGroup:k.NoSwInstalled]:[S.Origin,k.SwUnsupported]}function Y(e,n,t){return e.put(""+n,new Response(null,{status:200,statusText:(i=t,JSON.stringify(i,function(r,a){return a instanceof RegExp?"regexp:/"+(c=a).source+"/"+(c.flags||""):a;var c}))}));var i}function ze(){var e=function(n){var t=n;if(o.includeServiceWorker){var i=n.indexOf("?")>=0?"&":"?";t+=i+"othersw="+o.includeServiceWorker}return t}(o.sw);return l[h].register(e,{scope:o.scope||"/"}).then(function(n){window.addEventListener("unload",function(){return ve("unload")}),function(t){A(function(){window.setTimeout(function(){if(t.active&&typeof PerformanceResourceTiming!="undefined"){var i=(window.performance.getEntriesByType?performance.getEntriesByType("resource"):[]).map(function(r){return{name:r.name,url:r.initiatorType}});ue(t.active,{type:"prewarm-fetch",data:i}).then(function(r){if(r.applicationState===B.FAILED)return function(a){return caches.open(z(P,o.scope)).then(function(c){var s=window.devicePixelRatio,u=window.screen.width,d=[[location.origin,v.cookie]];return Promise.all([Y(c,"/com.baqend.speedkit.screen",{dpr:s,width:u}),Y(c,"/com.baqend.speedkit.config",o),Y(c,"/com.baqend.speedkit.cookie",{origins:d})])}).then(function(){return a.postMessage({type:"init-cache"})})}(t.active)})}},1e3)})}(n),function(t){t.navigationPreload&&function(i){if(i.active)return Promise.resolve(i.active);var r=i.waiting||i.installing;return new Promise(function(a){return r.onstatechange=function(){r.state==="activated"&&a(r)}})}(t).then(function(){o.navigationPreload?t.navigationPreload.enable():t.navigationPreload.disable()}).catch(N)}(n)})}function be(e){if(typeof Storage!="undefined")try{localStorage.removeItem(e)}catch(n){}v.cookie=e+"=; expires="+new Date().toUTCString()+"; path=/; SameSite=lax; Secure"}function Se(e){var n=I(e);if(n)return function(a){try{return JSON.parse(decodeURIComponent(a))}catch(c){return{group:"undefined",testId:"undefined"}}}(n);if(e==="baqend-speedkit-secondary-ab-test-info")return{group:"undefined",testId:"undefined"};var t=I("baqend-speedkit-ab-test-id"),i=I("baqend-speedkit-group"),r={group:i||"undefined",testId:t||"undefined"};return(t||i)&&D("baqend-speedkit-ab-test-info",encodeURIComponent(JSON.stringify(r))),r}function Qe(){var e,n,t=L("baqend-speedkit-rum-opt-out")==="1"||window.deactivateSpeedKitRUM,i=JSON.parse(L("baqend-speedkit-rum-split-enabled")||"{}"),r=!i.sessionId,a=i.sessionId===I("baqend-speedkit-session-id"),c=i&&i.sessionId?i.split!==!1:(n=Math.random()<((e=o.sampleRate)!==null&&e!==void 0?e:1),o.sampleRate&&G("baqend-speedkit-rum-split-enabled",JSON.stringify({split:n,sessionId:I("baqend-speedkit-session-id")})),n);if(o.rumTracking!==void 0&&!t&&c&&(a||r))return o.rumTracking;var s=o.rumTracking!==void 0&&o.rumTracking;return!(t||!c)&&s}try{(function(){if(!window[ee]){window[ee]=!0;var e=window.location.href.match(/speed-kit-rum-opt-out=([01])/);e&&G("baqend-speedkit-rum-opt-out",e[1]);var n=function(){D("/com.baqend.speedkit.denied","false");var p=I("/com.baqend.speedkit.denied")===null;return be("/com.baqend.speedkit.denied"),p}(),t=function(){var p={group:"",testId:o.splitTestId};if(window.location.href.indexOf("disableSpeedKit=1")>=0?p.group="B":window.location.href.indexOf("enableSpeedKit=1")>=0&&(p.group="A"),p.group)return D("baqend-speedkit-ab-test-info",encodeURIComponent(JSON.stringify(p))),p}()||Se("baqend-speedkit-ab-test-info"),i=Se("baqend-speedkit-secondary-ab-test-info");(function(p,f){if(o.sw=o.sw||"/sw.js",o.sessionLifetime=o.sessionLifetime||1800,o.split==null)o.group="A";else{var m=he(p,"baqend-speedkit-ab-test-info");o.group=m.group,o.splitTestId=m.splitTestId}if(o.secondarySplit!=null&&o.group==="A"){var b=he(f,"baqend-speedkit-secondary-ab-test-info");o.secondaryGroup=b.group,o.secondaryTestId=b.splitTestId}o.split!=null&&o.group&&(o.sw=(y=o.sw,w="gr",E=o.group,T=y.indexOf("?")>-1?"&":"?",""+y+T+w+"="+E));var y,w,E,T;if(o.rumTracking){var O=L("baqend-speedkit-rum-opt-out")==="1"||window.deactivateSpeedKitRUM;o.rumTracking=!O&&o.rumTracking}var j=!o.enableForWebViews&&(l.userAgent.toLowerCase().indexOf("wv)")>-1||($=me(l.userAgent),$[0]==="SafariWebView"&&$[1]>=14)),$;o.disabled=o.enabled===!1||o.disabled||o.group==="B"||o.secondaryGroup==="B"||j||function(){return l.userAgent.indexOf("Edge")>=0}()||!!window.deactivateSpeedKit,o.appURL="https://"+(o.appDomain||"{}.app.baqend.com".replace("{}",o.appName))+"/v1",o.customVariation&&o.customVariation.forEach(function(J){J.variationFunction=typeof J.variationFunction=="function"?J.variationFunction.toString():J.variationFunction})})(t,i);var r=function(p){var f=Ve(p);return f.disabled=o.group!=="B"&&o.secondaryGroup!=="B"&&!!W(),l[h]&&l[h].controller||!M()||(f.lastNavigate.responseSource=S.SDN),f}(function(p,f,m){var b=window.location.href,y=me(l.userAgent),w=y[0],E=y[1],T=_e(w,E,p,f.group==="B"||m.group==="B"),O=T[0];return{url:b,browser:w,browserVersion:E,responseCause:T[1],responseSource:O,cdnBackendTime:null,cdnPoP:null,firstLoad:ye(),splitTestId:f.testId,group:o.split!==void 0?f.group:o.group,disconnectCause:R.None}}(n,t,i));o.rumTracking=Qe();var a=C();if(a.noCookies&&function(p){for(var f=0,m=v.cookie.replace(/\s/g,"").split(";").filter(function(E){return E.lastIndexOf(p,0)===0});f<m.length;f++){var b=m[f],y=b.indexOf("="),w=y>-1?b.substr(0,y):b;v.cookie=w+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax; Secure"}}(P),!a.noTracking&&!a.performanceOnly||o.sampleRate||[x,V,X,_].forEach(function(p){return be(p)}),a.noTracking||n||function(p){F(p),Ie(p)}(r),ge(r.lastNavigate.responseCause)||(c=window.top!==window,location.protocol!=="https:"||!o.executeInIframe&&c))return void U(r);var c,s=l[h].controller;s?(Pe(s,r),o.customDevice&&le(o.customDevice),ve("load"),function(p){l[h].addEventListener("message",function(f){var m=f.data,b=m.type,y=m.payload;if(b==="asset-response-timings"){var w=y.assetSource,E=y.assetTTFB,T=y.cdnPoP;p.lastNavigate.assetSource=w,p.lastNavigate.assetTTFB=E,p.lastNavigate.cdnPoP=T,F(p)}})}(r),(u=l.userAgent).indexOf("Safari")>-1&&u.indexOf("Edge")===-1&&u.indexOf("Chrome")===-1&&se()===K.reload&&fe(),function(){if(!window.performance)return!1;if(!window.PerformanceNavigationTiming||!window.performance.getEntriesByType)return performance.navigation.redirectCount>0;var p=performance.getEntriesByType("navigation");return!!p.length&&p[0].redirectCount>0}()&&function(){var p=l[h].controller;p&&p.postMessage({type:"report-redirect"})}()):U(r);var u;if(W())return void ke().catch(N);if(!s)return Z();d=!1,A(function(){d||(d=!0,Z())}),g=function(){setTimeout(function(){d||(d=!0,Z())},1e3)},v.readyState==="loading"?v.addEventListener("DOMContentLoaded",g):setTimeout(g,0);var d,g}})()}catch(e){N(e)}function Z(){we().catch(function(e){return SpeedKit.track("fillDatabaseError",""+e,Date.now()),Te().then(function(){return we()})}).then(function(){return ze()}).catch(function(e){return N(e),ke()}).catch(N)}function we(){var e=function(s){return s&&new URL(s,location.origin).pathname}(o.scope),n=new oe(e),t=window.devicePixelRatio,i=window.screen.width,r=l.userAgent,a=o.customDevice,c=a?n.set("/com.baqend.speedkit.device",{device:a,userAgent:r}):Promise.resolve();return Promise.all([n.set("/com.baqend.speedkit.config",o),n.set("/com.baqend.speedkit.screen",{dpr:t,width:i}),n.set("/com.baqend.speedkit.cookie",{origins:[[location.origin,v.cookie]]}),Ye(n),c]).then(function(){return n.disconnect()})}function Ye(e){}function ke(){var e=new URL(o.scope||"/",location.origin).toString(),n=new URL(o.sw||"/sw.js",location.origin),t=n.origin+n.pathname;return l[h].getRegistrations().then(function(i){return i.forEach(function(r){var a=function(c){var s=c.active||c.installing||c.waiting;if(!s)return"";var u=new URL(s.scriptURL);return u.origin+u.pathname}(r);r.scope===e&&a===t&&r.unregister()})}).catch(function(){return null}).then(function(){return Te()})}function Te(){return Promise.all([caches.keys().then(function(n){var t=n.filter(function(i){return new RegExp("^"+z(P,o.scope)+".*").test(i)});return Promise.all(t.map(function(i){return caches.delete(i)}))}),(e=new oe(o.scope),e.clear().then(function(){return e.disconnect()}))]);var e}})(document,navigator,"serviceWorker",typeof speedKit!="undefined"?speedKit:config,"SNIPPET_LOADED");})();